(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1015:function(e,t){},1017:function(e,t){},1089:function(e,t){},1090:function(e,t){},1332:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(14),c=a.n(r),i=(a(772),a(773),a(72)),l=a(159),s=a(11),u=a(101),m=a(654),d=a(10),p=a(460),f=a.n(p),E=a(655),g=a.n(E),v={getUser:function(){var e=localStorage.getItem("user");if(e){var t=JSON.parse(e);return g()(t.token)}return null},saveUser:function(e){localStorage.setItem("user",JSON.stringify(e))},getToken:function(){var e=localStorage.getItem("user");if(e)return JSON.parse(e).token},removeUser:function(){localStorage.removeItem("user")}},h=f.a.create({baseURL:"http://localhost:3001/",timeout:1e4,headers:{"Content-Type":"application/json"}});h.interceptors.request.use(function(e){return e.headers.Authorization=v.getToken(),e});var b=f.a.CancelToken,O=h,N="LOADING",C="LOGIN_SUCCESS",y=function(e){return{type:N,payload:{value:e}}},D=function(e){return{type:C,payload:{value:e.data.token}}},j={isLoading:!1,token:""},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:return Object(d.a)({},e,{token:t.payload.value});case N:return Object(d.a)({},e,{isLoading:t.payload.value});default:return Object(d.a)({},e)}},L=a(66),T="LOADING_TOTAL_USERS",S="TOTAL_USERS",A="ERROR_LOAD_TOTAL_USERS",I="TOTAL_DEVICES",P="ERROR_LOAD_TOTAL_DEVICES",x="LOADING_TOTAL_DEVICES",_="TOTAL_LINES",k="ERROR_LOAD_TOTAL_LINES",M="LOADING_TOTAL_LINES",U="USERS_NOT_AUTHORIZED",F="UPDATE_USER",R="UPDATE_SCORE",G="LOADING_SCORE",q="ERROR_LOAD_SCORE",B=function(e){return{type:T,payload:{value:e}}},W=function(e){return{type:A,payload:{value:e}}},H=function(e){return{type:x,payload:{value:e}}},V=function(e){return{type:P,payload:{value:e}}},z=function(e){return{type:M,payload:{value:e}}},Y=function(e){return{type:k,payload:{value:e}}},J=function(e){return{type:G,payload:{value:e}}},X=function(e){return{type:q,payload:{value:e}}},Z=function(e){return{type:F,payload:{value:e}}},$={totalUsers:0,isLoadingTotalUsers:!1,errorLoadTotalUsers:!1,totalDevices:0,isLoadingTotalDevices:!1,errorLoadTotalDevices:!1,totalLines:0,isLoadingTotalLines:!1,errorLoadTotalLines:!1,usersNotAuthorized:[],user:{name:"",email:"",role:""},score:[],isLoadingScore:!1,errorToLoadScore:!1},K={UPDATE_COMPONENT_LOADING:"UPDATE_COMPONENT_LOADING"};function Q(e){return{type:K.UPDATE_COMPONENT_LOADING,payload:{value:e}}}var ee="UPDATE_EMPLOYEES",te=function(e,t){return{type:e,payload:{value:t}}},ae={data:{docs:[],total:0,limit:10,page:1,pages:1}},ne={loading:!1},oe="UPDATE_HISTORY",re=function(e,t){return{type:e,payload:{value:t}}},ce={docs:[],total:0,limit:10,page:1,pages:1},ie="UPDATE_SUGGESTION",le="UPDATE_SUGGESTION_CHOOSED",se=function(e,t){return{type:e,payload:{value:t}}},ue={docs:[],total:0,limit:10,page:1,pages:1,suggestion:null},me="UPDATE_LINES",de="UPDATE_LINE_EDITED",pe=function(e,t){return{type:e,payload:{value:t}}},fe={data:{docs:[],total:0,limit:10,page:1,pages:1},lineEdited:null},Ee="UPDATE_DEVICE_LINES",ge="ERROR_LOAD_LINES",ve="UPDATE_DEVICE_NAME",he="UPDATE_DEVICE_DIALOG",be="UPDATE_LINE_VALUE",Oe="DEVICE_CLEAR",Ne="UPDATE_DEVICES_DOCS",Ce="UPDATE_DEVICES",ye="UPDATE_CURRENT_DEVICE",De=function(e){return{type:Ce,payload:{value:e}}},je=function(e){return{type:ge,payload:{value:e}}},we=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:console.log;return function(t){t(Q(!0)),t(je(!1)),O.get("line/associate").then(function(e){var a;t(Q(!1)),t((a=e.data,{type:Ee,payload:{value:a}}))}).catch(function(a){t(je(!0)),t(Q(!1)),e(a)})}},Le={name:"",open:!1,lines:[],errorToLoadLines:!1,value:"",data:{docs:[],total:0,limit:10,page:1,pages:1},devices:[],currentDevice:null},Te="UPDATE_NEWS",Se="UPDATE_NEWS_EDITED",Ae=function(e,t){return{type:e,payload:{value:t}}},Ie={data:{docs:[],total:0,limit:10,page:1,pages:1},newsEdit:null},Pe=Object(u.c)({login:w,home:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T:return Object(d.a)({},e,{isLoadingTotalUsers:t.payload.value});case S:return Object(d.a)({},e,{totalUsers:t.payload.value});case A:return Object(d.a)({},e,{errorLoadTotalUsers:t.payload.value});case x:return Object(d.a)({},e,{isLoadingTotalDevices:t.payload.value});case I:return Object(d.a)({},e,{totalDevices:t.payload.value});case P:return Object(d.a)({},e,{errorLoadTotalDevices:t.payload.value});case M:return Object(d.a)({},e,{isLoadingTotalLines:t.payload.value});case _:return Object(d.a)({},e,{totalLines:t.payload.value});case k:return Object(d.a)({},e,{errorLoadTotalLines:t.payload.value});case U:return Object(d.a)({},e,{usersNotAuthorized:Object(L.a)(t.payload.value)});case F:return Object(d.a)({},e,{user:Object(d.a)({},t.payload.value)});case R:return Object(d.a)({},e,{score:t.payload.value});case G:return Object(d.a)({},e,{isLoadingScore:t.payload.value});case q:return Object(d.a)({},e,{errorToLoadScore:t.payload.value});default:return Object(d.a)({},e)}},employee:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ee:return Object(d.a)({},e,{data:Object(d.a)({},t.payload.value)});default:return Object(d.a)({},e)}},component:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case K.UPDATE_COMPONENT_LOADING:return Object(d.a)({},e,{loading:t.payload.value});default:return Object(d.a)({},e)}},history:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case oe:return Object(d.a)({},e,t.payload.value);default:return Object(d.a)({},e)}},suggestion:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ie:return Object(d.a)({},e,t.payload.value);case le:return Object(d.a)({},e,{suggestion:Object(d.a)({},t.payload.value)});default:return Object(d.a)({},e)}},line:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case me:return Object(d.a)({},e,{data:Object(d.a)({},t.payload.value),lineEdited:null});case de:return Object(d.a)({},e,{lineEdited:Object(d.a)({},t.payload.value)});default:return Object(d.a)({},e)}},device:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ve:return Object(d.a)({},e,{name:t.payload.value});case Ee:return Object(d.a)({},e,{lines:t.payload.value});case Ne:return Object(d.a)({},e,{data:t.payload.value});case Ce:return Object(d.a)({},e,{devices:t.payload.value,currentDevice:null});case ye:return Object(d.a)({},e,{currentDevice:t.payload.value});case he:return Object(d.a)({},e,{open:t.payload.value});case ge:return Object(d.a)({},e,{errorToLoadLines:t.payload.value});case be:return Object(d.a)({},e,{open:!1,value:t.payload.value||e.value});case Oe:return Object(d.a)({},e,{open:!1,name:"",lines:[],value:""});default:return Object(d.a)({},e)}},news:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Te:return Object(d.a)({},e,{data:Object(d.a)({},t.payload.value),newsEdit:null});case Se:return Object(d.a)({},e,{newsEdit:Object(d.a)({},t.payload.value)});default:return Object(d.a)({},e)}}}),xe=Object(u.e)(Pe,Object(u.a)(m.a)),_e=a(24),ke=(a(796),a(15)),Me=a(156),Ue=a(1364),Fe=a(1368),Re=a(163),Ge=a(1426),qe=a(1369),Be=a(657),We=a.n(Be),He=a(1362),Ve=Object(He.a)({root:{minHeight:"100vh"},contentLogo:{backgroundColor:"#536dfe",color:"#FFF",flex:2,fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif;',"@media (max-width: 1200px)":{display:"none"}},tabs:{marginBottom:16},fields:{flex:1.4},textTab:{fontSize:"20px"},textPresent:{fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif;',color:"#4A4A4A"},textFields:{margin:"16px 0px"},contentForgotPassword:{width:"70%",height:"80%"},linearProgress:{position:"absolute",top:0,left:0,width:"100%"},addMarginBottom:{marginBottom:10},content:{padding:"0px 16px"}}),ze=a(35),Ye=a(1424),Je=a(1367),Xe=function(e){var t=e.onClick,a=e.onClickRecoverPassword;Object(n.useEffect)(function(){var e=function(e){"Enter"!==e.key||m()||t(l)};return document.addEventListener("keypress",e),function(){return document.removeEventListener("keypress",e)}});var r=Ve(),c=Object(n.useState)({email:"",password:""}),i=Object(ke.a)(c,2),l=i[0],s=i[1],u=function(e){return function(a){s(Object(d.a)({},l,Object(ze.a)({},e,a.target.value))),m()||13!==a.keyCode||t(l)}},m=function(e){return!l.email||!l.password};return o.a.createElement(o.a.Fragment,null,o.a.createElement(Ue.a,{className:r.content,container:!0,direction:"column"},o.a.createElement(Ye.a,{onChange:u("email"),label:"Email",margin:"normal",className:r.textFields,placeholder:"Informe email"}),o.a.createElement(Ye.a,{onChange:u("password"),className:r.textFields,label:"Senha",margin:"normal",type:"password",placeholder:"Informe senha"}),o.a.createElement(Ue.a,{container:!0,justify:"space-between"},o.a.createElement(Je.a,{onClick:function(e){return t(l)},disabled:m(),variant:"contained",color:"primary"},"Entrar"),o.a.createElement(Je.a,{onClick:a,color:"primary"},"Esqueceu a senha?"))))},Ze=a(323),$e=a.n(Ze),Ke=function(e){var t=e.onClick,a=Ve(),r=Object(n.useState)({name:"",email:"",cpf:"",password:"",confirmPassword:""}),c=Object(ke.a)(r,2),i=c[0],l=c[1],s=function(e){return function(t){l(Object(d.a)({},i,Object(ze.a)({},e,t.target.value)))}};return o.a.createElement(o.a.Fragment,null,o.a.createElement(Ue.a,{className:a.content,container:!0,direction:"column"},o.a.createElement(Ye.a,{onChange:s("name"),label:"Nome",margin:"normal",className:a.textFields,placeholder:"Informe email"}),o.a.createElement(Ye.a,{onChange:s("email"),label:"Email",margin:"normal",className:a.textFields,placeholder:"Informe email"}),o.a.createElement($e.a,{mask:"999.999.999-99",onChange:s("cpf")},function(e){return o.a.createElement(Ye.a,Object.assign({},e,{label:"Cpf",margin:"normal",className:a.textFields}))}),o.a.createElement(Ye.a,{onChange:s("password"),label:"Senha",margin:"normal",type:"password",className:a.textFields,placeholder:"Informe senha"}),o.a.createElement(Ye.a,{onChange:s("confirmPassword"),label:"Confirme senha",margin:"normal",type:"password",className:a.textFields,placeholder:"Informe senha"}),o.a.createElement(Je.a,{onClick:function(){return t(i)},disabled:function(){if(i){var e=i.email,t=i.cpf,a=i.password,n=i.confirmPassword,o=i.name;return!(e&&t&&a&&n&&o)}return!0}(),variant:"contained",color:"primary"},"Entrar")))},Qe=function(e){var t=Ve(),a=Object(n.useState)(""),r=Object(ke.a)(a,2),c=r[0],i=r[1];return o.a.createElement(Ue.a,{item:!0,container:!0,direction:"column",justify:"flex-start",className:t.contentForgotPassword},o.a.createElement("h2",{className:t.textPresent},"Recuperar senha:"),o.a.createElement(Ye.a,{className:t.textFields,label:"Email",margin:"normal",variant:"outlined",placeholder:"Informe email",onChange:function(e){return i(e.target.value)}}),o.a.createElement(Je.a,{disabled:!c,className:t.addMarginBottom,variant:"contained",color:"primary",onClick:function(){return e.recoverPassword(c)}},"Enviar"),o.a.createElement(Je.a,{onClick:e.goBack},"Voltar"))},et=Object(_e.b)(function(e){return{isLoading:e.login.isLoading}},{requestLogin:function(e,t,a){return function(n){n(y(!0)),O.post("auth/employee",e).then(function(e){n(y(!1)),n(D(e)),v.saveUser(e.data),t()}).catch(function(e){n(y(!1)),e.response?a("Sem permiss\xe3o para acesso"):a("Falha de comunica\xe7\xe3o com o servidor")})}},createAccount:function(e,t,a){return function(n){n(y(!0)),O.post("employee",e).then(function(e){n(y(!1)),t()}).catch(function(e){n(y(!1)),a("Error ao criar conta")})}},recoverPassword:function(e,t,a){return function(n){n(y(!0)),O.post("employee/recover-password",{email:e}).then(function(e){n(y(!1)),t()}).catch(function(e){n(y(!1)),a("Error ao recuperar senha")})}}})(function(e){var t=Object(n.useState)(0),a=Object(ke.a)(t,2),r=a[0],c=a[1],i=function(e,t){return c(t)},u=Ve(),m=Object(Me.a)();function d(e){c(e)}Object(n.useEffect)(function(){v.getUser()&&e.history.push("/home")},[]);var p=function(t){e.isLoading||(t.password!==t.confirmPassword?s.a.error("Senhas diferentes",{position:s.a.POSITION.TOP_LEFT}):e.createAccount(t,function(){return s.a.success("Conta criada com sucesso, confirme no seu email")},function(e){return s.a.error(e)}))},f=function(t){e.isLoading||e.requestLogin(t,function(){s.a.success("Login efetuado com sucesso",{position:s.a.POSITION.BOTTOM_RIGHT,autoClose:2e3}),e.history.push("/home")},function(e){return s.a.error(e)})},E=function(t){e.recoverPassword(t,function(){return s.a.success("Verifique seu email")},function(e){return s.a.error(e)})};return o.a.createElement(o.a.Fragment,null,o.a.createElement(Ue.a,{container:!0,className:u.root,wrap:"nowrap"},e.isLoading&&o.a.createElement(Fe.a,{className:u.linearProgress}),o.a.createElement(Ue.a,{container:!0,justify:"center",alignItems:"center",item:!0,className:u.contentLogo},o.a.createElement(Re.a,{variant:"h1"},"Bus Locator")),o.a.createElement(Ue.a,{item:!0,container:!0,direction:"column",justify:"center",alignItems:"center",className:u.fields},o.a.createElement(l.b,{path:e.match.url,exact:!0,render:function(){return o.a.createElement(Ue.a,{item:!0,container:!0,direction:"column",alignItems:"center",justify:"center",style:{width:"80%"}},o.a.createElement(Ge.a,{className:u.tabs,variant:"fullWidth",value:r,onChange:i,indicatorColor:"primary",textColor:"primary"},o.a.createElement(qe.a,{className:u.textTab,label:"Entrar"}),o.a.createElement(qe.a,{className:u.textTab,label:"Nova Conta"})),o.a.createElement(Re.a,{variant:"h5",className:u.textPresent},"Bem vindo"),o.a.createElement(We.a,{axis:"rtl"===m.direction?"x-reverse":"x",index:r,onChangeIndex:d},o.a.createElement(Xe,{onClick:f,onClickRecoverPassword:function(){return e.history.push("/login/forgot-password")}}),o.a.createElement(Ke,{onClick:p})))}}),o.a.createElement(l.b,{path:e.match.url+"/forgot-password",exact:!0,render:function(){return o.a.createElement(Qe,{goBack:e.history.goBack,recoverPassword:E})}}))),o.a.createElement(l.a,{from:"*",to:"/login"}))}),tt=Object(He.a)({maxContainer:{minHeight:"100vh"},linearProgress:{position:"fixed",top:0,left:0,width:"100%",zIndex:1e4},container:{padding:16},marginVertical:{margin:function(e){return"".concat(e.marginVertical," 0px")}},maxWidth:{width:"100%"},maxHeight:{height:"100%"}}),at=a(1333),nt=a(1370),ot=a(1371),rt=a(1372),ct=a(1373),it=a(1374),lt=o.a.forwardRef(function(e,t){return o.a.createElement(at.a,Object.assign({direction:"down",ref:t},e))}),st=function(e){return o.a.createElement(nt.a,{open:e.open,TransitionComponent:function(){if(e.transition&&"Slide"===e.transition)return lt}(),keepMounted:!0,onClose:e.onClose,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description"},o.a.createElement(ot.a,{id:"alert-dialog-slide-title"},e.title),o.a.createElement(rt.a,null,o.a.createElement(ct.a,{id:"alert-dialog-slide-description"},e.message)),o.a.createElement(it.a,null,o.a.createElement(Je.a,{onClick:e.negativeAction,color:"primary"},e.negativeButton),o.a.createElement(Je.a,{onClick:e.positiveAction,color:"primary"},e.positiveButton)))},ut=a(665),mt=a.n(ut),dt=Object(He.a)(function(e){return{appBar:{boxShadow:"none",transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{width:"calc(100% - ".concat(240,"px) !important"),marginLeft:240,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},toolbar:{backgroundColor:"#FFF",borderBottom:"1px solid #DFE3E8"},title:{flexGrow:1,color:"#000"},paper:{boxShadow:"none",border:"1px solid #DFE3E8",padding:16,color:"#66788A"},content:{flexGrow:1,transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),backgroundColor:"#f8fafc"},contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginLeft:240,width:"calc(100% - ".concat(240,"px) !important")},result:{color:"#000"},contentIcon:{flex:1},contentInformation:{flex:2},icon:{backgroundColor:"#45B880",color:"#FFF",padding:16,fontSize:50,borderRadius:"50%"},popoverHeader:{backgroundImage:"url(".concat(mt.a,")"),backgroundRepeat:"no-repeat",backgroundSize:"contain",backgroundColor:"#f8fafc",backgroundPosition:"right",width:350,padding:30},removePadding:{padding:0},contentCard:{padding:16},card:{marginTop:5},drawer:{width:240,flexShrink:0},drawerPaper:{width:240}}}),pt=a(1395),ft=a(1396),Et=a(1390),gt=a(1392),vt=a(1397),ht=a(1389),bt=a(1384),Ot=a(1386),Nt=a(1391),Ct=a(1388),yt=a(1393),Dt=a(1394),jt=a(1334),wt=a(1434),Lt=a(1366),Tt={COMMON:"COMMON",ADMIN:"ADMIN"},St={ENABLED:"ENABLED",PENDING:"PEDING",NOT_AUTHORIZED:"NOT_AUTHORIZED"},At={HOME:"/home/dashboard",EMPLOYEES:"/home/employess",ACCOUNT:"/home/account",HISTORY:"/home/history",SUGGESTION:"/home/suggestion",DEVICES:"/home/devices",ADD_DEVICES:"/home/devices/add",LINES:"/home/lines",ADD_LINES:"/home/lines/add",MAP:"/home/maps",LOGIN:"/login",NEWS:"/home/news",ADD_NEWS:"/home/news/add"},It=a(1385),Pt=a(1387),xt=a(1375),_t=a(1376),kt=a(1377),Mt=a(1378),Ut=a(1379),Ft=a(1380),Rt=a(1381),Gt=a(1382),qt=a(1383),Bt=a(1),Wt=Object(He.a)({header:{height:200},listItem:{cursor:"pointer",margin:"8px 0px",borderLeft:"4px solid transparent","&:hover":{borderLeft:"4px solid #0767DB",borderRadius:4,backgroundColor:"#F6F9FD",color:"#0767DB !important"},"&:hover $icon":{color:"#0767DB !important"}},activeRoute:{borderLeft:"4px solid #0767DB",borderRadius:4,backgroundColor:"#F6F9FD"},listItemText:{fontWeight:500,color:"#66788A",marginLeft:8},listItemActive:{color:"#12161B"},iconActive:{color:"#0767DB !important"},icon:{minWidth:"unset !important",fontWeight:500,color:"#66788A"},list:{paddingLeft:8}}),Ht=Object(l.g)(function(e){var t=Object(_e.d)(function(e){return e.home.user}),a=e.onClose,n=e.open,r=e.location.pathname,c=dt(),i=Wt(),l=t.role===Tt.ADMIN,s=[{icon:o.a.createElement(xt.a,null),text:"Painel de controle",url:At.HOME,show:l,isActive:r.includes(At.HOME),onClick:function(){r!==At.HOME&&u(At.HOME)}},{icon:o.a.createElement(_t.a,null),text:"Mapa",url:At.MAP,show:!0,isActive:r.includes(At.MAP),onClick:function(){r!==At.MAP&&u(At.MAP)}},{icon:o.a.createElement(kt.a,null),text:"Minha Conta",url:At.ACCOUNT,show:!0,isActive:r.includes(At.ACCOUNT),onClick:function(){r!==At.ACCOUNT&&u(At.ACCOUNT)}},{icon:o.a.createElement(Mt.a,null),text:"Funcion\xe1rios",url:At.EMPLOYEES,show:!0,isActive:r.includes(At.EMPLOYEES),onClick:function(){r!==At.EMPLOYEES&&u(At.EMPLOYEES)}},{icon:o.a.createElement(Ut.a,null),text:"Hist\xf3rico",url:At.HISTORY,show:l,isActive:r.includes(At.HISTORY),onClick:function(){r!==At.HISTORY&&u(At.HISTORY)}},{icon:o.a.createElement(Ft.a,null),text:"D\xfavidas e sugest\xf5es",url:At.SUGGESTION,show:!0,isActive:r.includes(At.SUGGESTION),onClick:function(){r!==At.SUGGESTION&&u(At.SUGGESTION)}},{icon:o.a.createElement(Rt.a,null),text:"Dispositivos",url:At.DEVICES,show:!0,isActive:r.includes(At.DEVICES),onClick:function(){r!==At.DEVICES&&u(At.DEVICES)}},{icon:o.a.createElement(Gt.a,null),text:"Linhas",url:At.LINES,show:!0,isActive:r.includes(At.LINES),onClick:function(){r!==At.LINES&&u(At.LINES)}},{icon:o.a.createElement(qt.a,null),text:"Not\xedcias",url:At.NEWS,show:!0,isActive:r.includes(At.NEWS),onClick:function(){r!==At.NEWS&&u(At.NEWS)}}];function u(t){e.history.push(t)}return o.a.createElement(Pt.a,{variant:"persistent",onClose:a,className:c.drawer,anchor:"left",open:n,classes:{paper:c.drawerPaper}},o.a.createElement(Ct.a,null),o.a.createElement(Ue.a,{container:!0,justify:"center",direction:"column",alignItems:"center",className:i.header},o.a.createElement("h1",null,"Logo"),o.a.createElement(Re.a,{variant:"h6"},t.name),o.a.createElement("span",null,t.email)),o.a.createElement(Ct.a,null),o.a.createElement(Lt.a,{className:i.list},s.map(function(e,t){return e.show?o.a.createElement(bt.a,{key:t.toString(),onClick:e.onClick,className:Object(Bt.a)(i.listItem,Object(ze.a)({},i.activeRoute,e.isActive))},o.a.createElement(It.a,{className:Object(Bt.a)(i.icon,Object(ze.a)({},i.iconActive,e.isActive))},e.icon),o.a.createElement(Ot.a,{className:Object(Bt.a)(i.listItemText,Object(ze.a)({},i.listItemActive,e.isActive))},e.text)):null})))}),Vt=Object(l.g)(function(e){var t,a=(t={},Object(ze.a)(t,At.HOME,"Painel de controle"),Object(ze.a)(t,At.EMPLOYEES,"Funcion\xe1rios"),Object(ze.a)(t,At.ACCOUNT,"Minha Conta"),Object(ze.a)(t,At.HISTORY,"Hist\xf3rico"),Object(ze.a)(t,At.SUGGESTION,"D\xfavidas e sugest\xf5es"),Object(ze.a)(t,At.DEVICES,"Dipositivos"),Object(ze.a)(t,At.ADD_DEVICES,"Adicionar dispositivo"),Object(ze.a)(t,At.LINES,"Linhas"),Object(ze.a)(t,At.ADD_LINES,"Adicionar linha"),Object(ze.a)(t,At.MAP,"Mapa"),t),r=Object(_e.d)(function(e){return e.home.user}),c=tt(),i=dt(),l=Object(n.useState)(!1),s=Object(ke.a)(l,2),u=s[0],m=s[1],d=Object(n.useState)(!1),p=Object(ke.a)(d,2),f=p[0],E=p[1],g=o.a.useState(null),v=Object(ke.a)(g,2),h=v[0],b=v[1],O=e.usersNotAuthorized.length,N=function(){return m(!u)},C=function(){e.onDrawer(!f),E(!f)};return o.a.createElement(o.a.Fragment,null,o.a.createElement(yt.a,{position:"relative",className:Object(Bt.a)(i.appBar,Object(ze.a)({},i.appBarShift,f))},o.a.createElement(Dt.a,{className:i.toolbar},o.a.createElement(jt.a,{onClick:C,edge:"start",className:c.menuButton,"aria-label":"Open drawer"},f?o.a.createElement(pt.a,null):o.a.createElement(ft.a,null)),o.a.createElement(Re.a,{variant:"h6",className:i.title},a[e.location.pathname]||"Painel de controle"),r&&r.role===Tt.ADMIN&&o.a.createElement(jt.a,{onClick:function(e){O&&(b(u?null:e.currentTarget),m(!u))}},O?o.a.createElement(ht.a,{badgeContent:O,color:"secondary"},o.a.createElement(Et.a,null)):o.a.createElement(Et.a,null)),o.a.createElement(jt.a,{onClick:e.handleClose},o.a.createElement(vt.a,null)))),o.a.createElement(wt.a,{open:u,anchorEl:h,onClose:N,anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},o.a.createElement(Ue.a,{className:i.popoverHeader},o.a.createElement(Re.a,{variant:"h5"},"Solicita\xe7\xe3o de entrada")),o.a.createElement(Ue.a,null,o.a.createElement(Lt.a,{className:i.removePadding},e.usersNotAuthorized.map(function(t){return o.a.createElement(o.a.Fragment,{key:t._id},o.a.createElement(bt.a,{onClick:function(){N(),e.onSelectedUser(t)},button:!0,className:i.content},o.a.createElement(Ot.a,{primary:t.name,secondary:t.email}),o.a.createElement(Nt.a,null,o.a.createElement(gt.a,null))),o.a.createElement(Ct.a,null))})))),o.a.createElement(Ht,{onClose:C,open:f}))}),zt=a(1398),Yt=a(1429),Jt=Object(He.a)({field:{flex:1},information:{flex:3},checkBox:{paddingLeft:0,"&:hover":{backgroundColor:"transparent !important"}}}),Xt=function(e){var t=Object(_e.c)(),a=e.user;a||(a={name:"",email:"",cpf:"",role:Tt.COMMON});var r=a.role===Tt.ADMIN,c=Jt(),i=Object(n.useState)(),l=Object(ke.a)(i,2),s=l[0],u=l[1],m=Object(n.useState)(!1),d=Object(ke.a)(m,2),p=d[0],f=d[1];function E(){var n={name:a.name,cpf:a.cpf,status:St.ENABLED,email:a.email};n.role=s?Tt.ADMIN:Tt.COMMON;var o=function(e){e(),f(!1),t(Q(!1))};f(!0),t(Q(!0)),O.patch("employee/edit",n).then(function(){return o(e.success)}).catch(function(t){return o(e.error)})}return Object(n.useEffect)(function(){u(r),e.open||u(!1)},[e.open]),o.a.createElement(nt.a,{open:e.open,keepMounted:!0,"aria-labelledby":"alert-dialog-slide-title","aria-describedby":"alert-dialog-slide-description"},o.a.createElement(ot.a,{id:"alert-dialog-slide-title"},"Aten\xe7\xe3o"),o.a.createElement(rt.a,null,o.a.createElement(ct.a,{id:"alert-dialog-slide-description"},e.message),o.a.createElement(Ue.a,{container:!0,direction:"row",wrap:"nowrap"},o.a.createElement(Ue.a,{container:!0,className:c.field},o.a.createElement(Re.a,null,"Nome: ")),o.a.createElement(Ue.a,{container:!0,className:c.information},o.a.createElement(Re.a,null,a.name))),o.a.createElement(Ue.a,{container:!0,direction:"row",wrap:"nowrap"},o.a.createElement(Ue.a,{container:!0,className:c.field},o.a.createElement(Re.a,null,"Cpf: ")),o.a.createElement(Ue.a,{container:!0,className:c.information},o.a.createElement(Re.a,null,a.cpf))),o.a.createElement(Ue.a,{container:!0,direction:"row",wrap:"nowrap"},o.a.createElement(Ue.a,{container:!0,className:c.field},o.a.createElement(Re.a,null,"Email: ")),o.a.createElement(Ue.a,{container:!0,className:c.information},o.a.createElement(Re.a,null,a.email))),o.a.createElement(Ue.a,{container:!0,direction:"row",wrap:"nowrap",alignItems:"center"},o.a.createElement(Ue.a,null,o.a.createElement(Yt.a,{color:"primary",checked:s,onChange:function(e){return u(e.target.checked)},className:c.checkBox})),o.a.createElement(Ue.a,null,o.a.createElement(Re.a,null,e.messageCheckBox)))),o.a.createElement(it.a,null,o.a.createElement(Je.a,{onClick:e.negativeAction,color:"primary"},"N\xe3o"),p?o.a.createElement(zt.a,null):o.a.createElement(Je.a,{onClick:E,color:"primary"},"Sim")))},Zt=a(1430),$t=a(1401),Kt=a(1400),Qt=a(1403),ea=a(466),ta=a(1405),aa=a(1406),na=a(1407),oa=a(1408),ra=a(1404),ca=function(e){var t=e.status;return o.a.createElement("p",null,t===St.PENDING?"Usu\xe1rio pendente":t===St.NOT_AUTHORIZED?"N\xe3o autorizado":t===St.ENABLED?"Usu\xe1rio habilitado":"Desconhecido")},ia=function(e){var t=e.role;return o.a.createElement("p",null,t===Tt.ADMIN?"Administrador":t===Tt.COMMON?"Comum":"Desconhecido")},la=a(1402),sa=a(1431),ua=a(1399),ma=Object(He.a)(function(e){return{root:{width:"100%",padding:32},tableWrapper:{overflowX:"auto",marginTop:32},rightIcon:{marginLeft:e.spacing(1)},input:{minWidth:"50%"},tableCellFooter:{paddingRight:"32px !important"}}}),da=Object(_e.b)(function(e){return{data:e.employee.data,isLoading:e.component.loading,user:e.home.user}},{requestEmployees:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:console.log;return function(o){o(te(K.UPDATE_COMPONENT_LOADING,!0));var r="employee?limit=".concat(t,"&page=").concat(e);a&&(r=r.concat("&field=".concat(a))),O.get(r).then(function(e){o(te(K.UPDATE_COMPONENT_LOADING,!1)),o(te(ee,e.data))}).catch(function(e){o(te(K.UPDATE_COMPONENT_LOADING,!1)),n(e)})}},removeEmployee:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:console.log,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;return function(n){n(te(K.UPDATE_COMPONENT_LOADING,!0)),O.delete("employee",{data:e}).then(function(e){n(te(K.UPDATE_COMPONENT_LOADING,!1)),t(e)}).catch(function(e){n(te(K.UPDATE_COMPONENT_LOADING,!1)),a(e)})}}})(function(e){var t=ma(),a=new sa.a;a.pipe(Object(ua.a)(300)).subscribe(function(t){l(t),e.requestEmployees(1,10,t)});var r=Object(n.useState)(""),c=Object(ke.a)(r,2),i=c[0],l=c[1],u=Object(n.useState)(!1),m=Object(ke.a)(u,2),d=m[0],p=m[1],f=Object(n.useState)(!1),E=Object(ke.a)(f,2),g=E[0],v=E[1],h=Object(n.useState)({name:"",email:""}),b=Object(ke.a)(h,2),O=b[0],N=b[1],C=e.user.role===Tt.ADMIN;function y(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.data.page;e.isLoading||e.requestEmployees(t,e.data.limit,i,function(){s.a.error("Falha na comunica\xe7\xe3o com o servidor")})}return Object(n.useEffect)(function(){return e.requestEmployees(e.page,e.data.limit,i,function(){s.a.error("Falha na comunica\xe7\xe3o com o servidor")}),function(){return a.complete()}},[]),o.a.createElement(Ue.a,{className:t.root},o.a.createElement(Ye.a,{onChange:function(e){return a.next(e.target.value)},className:t.input,variant:"outlined",label:"Procurar",placeholder:"Digite aqui para buscar",InputProps:{startAdornment:o.a.createElement(Qt.a,{position:"start"},o.a.createElement(jt.a,{onClick:function(){return e.requestEmployees(1,10,i)}},o.a.createElement(ra.a,null)))}}),o.a.createElement(ea.a,{className:t.tableWrapper},o.a.createElement(ta.a,null,o.a.createElement(aa.a,null,o.a.createElement($t.a,null,o.a.createElement(Kt.a,{component:"th"},"Nome"),o.a.createElement(Kt.a,{component:"th"},"Email"),o.a.createElement(Kt.a,{component:"th"},"Status"),o.a.createElement(Kt.a,{component:"th"},"Papel"),C&&o.a.createElement(Kt.a,{component:"th"},"Remover"))),o.a.createElement(na.a,null,e.data.docs.map(function(e){return o.a.createElement($t.a,{onClick:function(){C&&(N(e),v(!0))},hover:C,key:e._id},o.a.createElement(Kt.a,null,e.name),o.a.createElement(Kt.a,null,e.email),o.a.createElement(Kt.a,null,o.a.createElement(ca,{status:e.status})),o.a.createElement(Kt.a,null,o.a.createElement(ia,{role:e.role})),C&&o.a.createElement(Kt.a,{component:"th"},o.a.createElement(Je.a,{onClick:function(t){t.stopPropagation(),p(!0),N(e)},variant:"outlined",color:"secondary"},"Remover",o.a.createElement(la.a,{className:t.rightIcon}))))})),o.a.createElement(oa.a,null,o.a.createElement($t.a,null,o.a.createElement(Zt.a,{labelDisplayedRows:function(e){var t=e.from,a=e.to,n=e.count;return"".concat(t,"-").concat(a," de ").concat(n)},rowsPerPage:10,rowsPerPageOptions:[],count:e.data.total,page:e.data.page-1,onChangePage:function(e,t){y(t+1)}}))))),o.a.createElement(st,{open:d,onClose:p,title:"Aten\xe7\xe3o",message:"Deseja remover o usu\xe1rio ".concat(O.name,"?"),negativeButton:"N\xe3o",positiveButton:"Sim",negativeAction:function(){return p(!1)},positiveAction:function(){return p(!1),void(O.email&&e.removeEmployee(O,function(){s.a.success("Usu\xe1rio removido com sucesso",{autoClose:2e3}),e.requestEmployees(e.data.page,e.data.limit)},function(){return s.a.error("Falha ao deletar usu\xe1rio")}))}}),o.a.createElement(Xt,{message:"Deseja aleterar permiss\xe3o desse usu\xe1rio?",messageCheckBox:"Administrador",success:function(){v(!1),y(),s.a.success("Usu\xe1rio editado",{autoClose:2e3})},error:function(){v(!1),s.a.error("Falha editar usu\xe1rio",{autoClose:2e3})},user:O,open:g,negativeAction:function(){return v(!1)}}))}),pa=Object(He.a)({root:{padding:16},contentPadding:{padding:32},content:{width:"70%"},contentButton:{margin:"16px 32px"}});var fa=function(e){Object(n.useEffect)(function(){O.get("employee/current").then(function(e){var t=e.data;return l(t)}).catch(function(e){return s.a.error("Falha de comunica\xe7\xe3o com o servidor")})},[]);var t=Object(_e.c)(),a=pa(),r=Object(n.useState)({name:"",email:"",cpf:"",password:"",confirmPassword:""}),c=Object(ke.a)(r,2),i=c[0],l=c[1],u=function(e){return function(t){l(Object(d.a)({},i,Object(ze.a)({},e,t.target.value)))}};return o.a.createElement(Ue.a,{className:a.root,container:!0,justify:"center",alignItems:"center"},o.a.createElement(ea.a,{className:a.content},o.a.createElement(Ue.a,{container:!0,direction:"column"},o.a.createElement(Ue.a,{className:a.contentPadding},o.a.createElement(Re.a,{variant:"h5"},"Perfil"),o.a.createElement(Re.a,{variant:"h6"},"As informa\xe7\xf5es podem ser editadas")),o.a.createElement(Ct.a,null),o.a.createElement(Ue.a,{className:a.contentPadding,container:!0,direction:"column"},o.a.createElement(Ye.a,{onChange:u("name"),label:"Nome",margin:"normal",placeholder:"Informe email",variant:"outlined",value:i.name}),o.a.createElement(Ye.a,{label:"Email",margin:"normal",placeholder:"Informe email",variant:"outlined",value:i.email,disabled:!0}),o.a.createElement($e.a,{mask:"999.999.999-99",value:i.cpf,onChange:u("cpf")},function(e){return o.a.createElement(Ye.a,Object.assign({},e,{label:"Cpf",margin:"normal",variant:"outlined"}))}),o.a.createElement(Ye.a,{onChange:u("password"),label:"Senha",margin:"normal",type:"password",placeholder:"Informe senha",variant:"outlined"}),o.a.createElement(Ye.a,{onChange:u("confirmPassword"),label:"Confirme senha",margin:"normal",type:"password",placeholder:"Informe senha",variant:"outlined"})),o.a.createElement(Ct.a,null),o.a.createElement(Ue.a,{className:a.contentButton},o.a.createElement(Je.a,{onClick:function(){i.password!==i.confirmPassword?s.a.error("Senhas diferentes"):(t(Q(!0)),O.patch("employee/edit",i).then(function(e){var a=e.data;t(Q(!1)),t(Z(a.user)),s.a.success("Conta editada com sucesso")}).catch(function(e){t(Q(!1)),s.a.error("Falha editar conta")}))},disabled:function(){if(i){var e=i.email,t=i.cpf,a=i.password,n=i.confirmPassword,o=i.name;return!(e&&t&&a&&n&&o)}return!0}(),variant:"contained",color:"primary"},"Salvar")))))},Ea=function(e){var t=3,a=2,n=1,r=Object(_e.d)(function(e){return e.home.user});return o.a.createElement(o.a.Fragment,null,function(){var c=function(){var o=v.getUser();return o?e.onlyToken?n:!r.role&&o.role===Tt.ADMIN||r.role===Tt.ADMIN?n:a:t}();return c===t?o.a.createElement(l.a,{to:At.LOGIN}):c===n?e.children:o.a.createElement(l.a,{to:At.MAP})}())},ga=Object(He.a)(function(e){return{root:{width:"100%",padding:32},tableWrapper:{overflowX:"auto",marginTop:32},rightIcon:{marginLeft:e.spacing(1)},input:{minWidth:"50%"},tableCellFooter:{paddingRight:"32px !important"}}}),va=Object(_e.b)(function(e){return Object(d.a)({},e.history,{isLoading:e.component.loading})},{requestHistories:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:console.log;return function(o){o(re(K.UPDATE_COMPONENT_LOADING,!0));var r="history?limit=".concat(t,"&page=").concat(e);a&&(r=r.concat("&field=".concat(a))),O.get(r).then(function(e){o(re(K.UPDATE_COMPONENT_LOADING,!1)),o(re(oe,e.data))}).catch(function(e){o(re(K.UPDATE_COMPONENT_LOADING,!1)),n(e)})}}})(function(e){var t=ga(),a=new sa.a;a.pipe(Object(ua.a)(300)).subscribe(function(t){l(t),e.requestHistories(1,10,t)});var r=Object(n.useState)(""),c=Object(ke.a)(r,2),i=c[0],l=c[1];return Object(n.useEffect)(function(){return e.requestHistories(e.page,e.limit,i,function(){s.a.error("Falha na comunica\xe7\xe3o com o servidor")}),function(){return a.complete()}},[]),o.a.createElement(Ea,null,o.a.createElement(Ue.a,{className:t.root},o.a.createElement(Ye.a,{onChange:function(e){return a.next(e.target.value)},className:t.input,variant:"outlined",label:"Procurar",placeholder:"Digite aqui para buscar, para data: yyyy-mm-dd",InputProps:{startAdornment:o.a.createElement(Qt.a,{position:"start"},o.a.createElement(jt.a,{onClick:function(){return e.requestHistories(1,10,i)}},o.a.createElement(ra.a,null)))}}),o.a.createElement(ea.a,{className:t.tableWrapper},o.a.createElement(ta.a,null,o.a.createElement(aa.a,null,o.a.createElement($t.a,null,o.a.createElement(Kt.a,{component:"th"},"Usu\xe1rio"),o.a.createElement(Kt.a,{component:"th"},"Mensagem"),o.a.createElement(Kt.a,{component:"th"},"Criado em"))),o.a.createElement(na.a,null,e.docs.map(function(e){return o.a.createElement($t.a,{key:e._id},o.a.createElement(Kt.a,null,e.email),o.a.createElement(Kt.a,null,e.reason),o.a.createElement(Kt.a,null,new Date(e.createdAt).toLocaleString()))})),o.a.createElement(oa.a,null,o.a.createElement($t.a,null,o.a.createElement(Zt.a,{labelDisplayedRows:function(e){var t=e.from,a=e.to,n=e.count;return"".concat(t,"-").concat(a," de ").concat(n)},rowsPerPage:10,rowsPerPageOptions:[],count:e.total,page:e.page-1,onChangePage:function(t,a){!function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.page;e.isLoading||e.requestHistories(t,e.limit,i,function(){s.a.error("Falha na comunica\xe7\xe3o com o servidor")})}(a+1)}})))))))}),ha=a(121),ba=a(125),Oa=Object(ha.a)(Object(ha.b)({googleMapURL:"https://maps.googleapis.com/maps/api/js?key=AIzaSyCfg6PgpQycYtUFaSRl336lsM8EDPmpmfI&v=3.exp&libraries=geometry,drawing,places&callback=initMap",center:{lat:-22.2295935,lng:-45.9434848},loadingElement:o.a.createElement("div",{style:{width:"100%"}}),containerElement:o.a.createElement("div",{style:{width:"100%"}}),mapElement:o.a.createElement("div",{style:{height:"100%",width:"100%"}})}),ba.withScriptjs,ba.withGoogleMap)(function(e){var t=e.children,a=e.onClick;return o.a.createElement(ba.GoogleMap,{defaultZoom:15,onClick:function(e){return a&&a(e)},defaultCenter:e.center},t&&t)});var Na=a(463),Ca=a.n(Na),ya=a(668),Da=a.n(ya),ja=Object(He.a)({filterBtn:{position:"absolute",top:20,right:20,zIndex:1},contentMap:{position:"relative"}}),wa=a(669),La="mqtt_rasp"+Math.random().toString(16).substr(2,8),Ta=Object(wa.connect)("ws://ec2-18-228-196-51.sa-east-1.compute.amazonaws.com:9001",{username:"TCC",password:"TCC",clientId:La});Ta.on("connect",function(){return console.log("connected")}),Ta.on("reconnect",function(){return console.log("reconnect")}),Ta.on("disconnect",function(){return console.log("disconnected")}),Ta.on("error",function(e){return console.log("error",e)}),Ta.on("offline",function(){return console.log("offline")});var Sa=Ta,Aa=Object(_e.b)(function(e){return{devices:e.device.devices,loading:e.component.loading,currentDevice:e.device.currentDevice}},{requestAllDevices:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:console.log;return function(a){a(Q(!0)),O.get("device?all=all").then(function(t){a(Q(!1)),a(De(t.data)),e&&e()}).catch(function(e){a(Q(!1)),t(e)})}},updateDevices:De,requestDeviceById:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:console.log;return function(a){a(Q(!0));var n="device/".concat(e);O.get(n).then(function(e){var t;a(Q(!1)),a((t=e.data,{type:ye,payload:{value:t}}))}).catch(function(e){a(Q(!1)),t(e)})}}})(function(e){var t=Object(n.useState)(!1),a=Object(ke.a)(t,2),r=a[0],c=a[1],i=Object(n.useState)({device:null,open:!1,filter:!1}),l=Object(ke.a)(i,2),u=l[0],m=l[1],p=tt({marginVertical:"16px"}),f=ja();function E(t,a){try{if(t.endsWith("/location")){var n=t.split("/")[0],o=xe.getState().device.devices,r=Object(L.a)(o),c=r.find(function(e){return e.uuid===n});if(c){var i=JSON.parse(String(a));c.latitude=i.lat,c.longitude=i.lon,e.updateDevices(r)}}}catch(l){}}return Object(n.useEffect)(function(){return window.initMap=function(){return c(!0)},(r||window.google)&&(e.requestAllDevices(),Sa.subscribe("#"),Sa.addListener("message",E)),function(){e.updateDevices([]),Sa.removeListener("message",E),Sa.unsubscribe("#")}},[r]),Object(n.useEffect)(function(){e.currentDevice&&m({device:e.currentDevice,open:!1,filter:!0})},[e.currentDevice]),o.a.createElement(Ue.a,{className:f.contentMap,container:!0},u.filter&&o.a.createElement(Je.a,{onClick:function(){return m({device:null,filter:!1,open:!1})},variant:"contained",color:"primary",className:f.filterBtn},"Remover filtro"),o.a.createElement(Oa,null,function(){var t=window.google;if(t)return e.devices.filter(function(e){return!(u.filter&&u.device&&u.device._id!==e._id)}).map(function(e){var a=e.lineNumber?"".concat(e.lineNumber," - ").concat(e.lineDescription):null;return e.latitude&&e.longitude?o.a.createElement(Ca.a,{onClick:function(){return m(Object(d.a)({},u,{open:!0,device:e}))},key:e._id,icon:{url:Da.a,scaledSize:new t.maps.Size(50,50)},position:{lat:e.latitude,lng:e.longitude},labelAnchor:new t.maps.Point(0,0),labelStyle:a&&{backgroundColor:"#FFF",fontSize:"12px",padding:"8px",borderRadius:"8px"}},a?o.a.createElement("div",null,a):o.a.createElement("div",null)):null})}(),function(){if(u.filter&&u.device.line.directions)return o.a.createElement(ba.Polyline,{path:u.device.line.directions.routes,geodesic:!0,options:{strokeColor:"#ff2527",strokeWeight:3}})}(),function(){if(u.filter&&u.device.line.points)return u.device.line.points.map(function(e,t){return o.a.createElement(Ca.a,{key:t.toString(),position:e,labelAnchor:new window.google.maps.Point(0,0),labelStyle:e.name&&{backgroundColor:"#FFF",fontSize:"12px",padding:"8px",borderRadius:"8px"}},e.name?o.a.createElement("div",null,e.name):o.a.createElement("div",null))})}()),function(){if(u.device){var t=u.device.lineNumber?"".concat(u.device.lineNumber," - ").concat(u.device.lineDescription):"Sem linha associada";return o.a.createElement(Pt.a,{open:u.open,onClose:function(){return m(Object(d.a)({},u,{open:!1}))},anchor:"top"},o.a.createElement(Ue.a,{className:p.container,container:!0,direction:"column"},o.a.createElement(Re.a,{className:p.marginVertical,variant:"h4"},u.device.name),o.a.createElement(Re.a,{variant:"h5"},t),o.a.createElement(Ue.a,null,o.a.createElement(Je.a,{onClick:function(){u.device.line&&e.requestDeviceById(u.device._id,function(){s.a.error("Falha ao verificar rota"),m({device:null,filter:!1,open:!1})})},className:p.marginVertical,color:"primary",variant:"outlined"},"Visualizar linha"))))}}())});var Ia,Pa=a(464),xa=a.n(Pa),_a=a(670),ka=a(1365),Ma=a(1409),Ua=Object(He.a)(function(e){return{title:{margin:0,fontWeight:"normal"},contentTitle:{display:"flex",margin:"5px 32px",alignItems:"center","& h3":{marginLeft:16,marginTop:3}},contentTalk:{maxHeight:"calc(100vh - 65px)"},contentMessages:{flex:1,overflowY:"auto"},input:{flex:1,alignItems:"flex-start"},contentInputMessage:{border:"1px solid #DFE3E8",backgroundColor:"#FFF",borderRadius:2,display:"flex",flex:1,padding:5},icon:{marginLeft:e.spacing(1)},footer:{flex:.3,padding:16},contentField:{width:"100%",minHeight:"20vh",display:"flex",flexDirection:"column"},contentButton:{display:"flex",justifyContent:"flex-end"},contentList:{display:"flex",flexDirection:"column",overflowY:"auto",padding:"0px 32px 5px 32px"},card:{boxShadow:"0 1px 15px rgba(0,0,0,.04), 0 1px 6px rgba(0,0,0,.04)",borderRadius:"calc(.15rem - 1px)",border:"initial",backgroundColor:"#FFF",padding:16,display:"flex",flexDirection:"column",width:"max-content",maxWidth:"70%"},cardMessage:{display:"flex",justifyContent:"space-between",alignItems:"center","& p":{margin:0}},contentCard:{marginTop:16,width:"100%"},contentRight:{display:"flex",justifyContent:"flex-end"},date:{marginLeft:"16px !important",fontSize:".6rem"},name:{fontStyle:"italic"},contentTime:{display:"flex",alignItems:"center"}}}),Fa=Object(_e.b)(function(e){return{suggestion:e.suggestion.suggestion,user:e.home.user,loading:e.component.loading}},{getSuggestionById:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:console.log;return function(a){a(se(K.UPDATE_COMPONENT_LOADING,!0)),O.get("suggestion/".concat(e)).then(function(e){a(se(K.UPDATE_COMPONENT_LOADING,!1)),a(se(le,e.data))}).catch(function(e){a(se(K.UPDATE_COMPONENT_LOADING,!1)),t(e)})}},removeMessage:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:console.log;return function(o){o(se(K.UPDATE_COMPONENT_LOADING,!0)),O.delete("suggestion/message",{data:{suggestion:e,message:t}}).then(function(e){o(se(K.UPDATE_COMPONENT_LOADING,!1)),a(e)}).catch(function(e){o(se(K.UPDATE_COMPONENT_LOADING,!1)),n(e)})}}})(Object(l.g)(function(e){var t=e.suggestion,a=e.match.params,r=Ua(),c=Object(n.useState)(""),i=Object(ke.a)(c,2),l=i[0],u=i[1],m=Object(_e.c)(),d=v.getUser().entity,p=Object(n.useRef)(null);function f(){return(f=Object(_a.a)(xa.a.mark(function n(){var o;return xa.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!t||!d){n.next=14;break}return o={id:t._id,data:{by:e.user._id,message:l,onModel:d}},m(Q(!0)),n.prev=3,u(""),n.next=7,O.patch("suggestion",o);case 7:e.getSuggestionById(a.id),n.next=14;break;case 10:n.prev=10,n.t0=n.catch(3),m(Q(!1)),s.a.error("Falha ao enviar mensagem");case 14:case"end":return n.stop()}},n,null,[[3,10]])}))).apply(this,arguments)}return Object(n.useEffect)(function(){e.getSuggestionById(a.id,function(){return e.history.goBack()})},[]),Object(n.useEffect)(function(){var e=p.current.scrollHeight,t=p.current.clientHeight,a=e-t;p.current.scrollTop=a>0?a:0},[t]),o.a.createElement(Ue.a,{container:!0,direction:"column",wrap:"nowrap",className:r.contentTalk},o.a.createElement(Ue.a,{className:r.contentMessages,container:!0,wrap:"nowrap",direction:"column"},o.a.createElement("div",{className:r.contentTitle},o.a.createElement("h2",{className:r.title},"T\xedtulo: "),t&&o.a.createElement("h3",{className:r.title},t.title)),o.a.createElement(Ct.a,null),o.a.createElement("div",{ref:p,className:r.contentList},t?t.messages.map(function(n,c){return o.a.createElement("div",{key:c.toString(),className:Object(Bt.a)(r.contentCard,Object(ze.a)({},r.contentRight,e.user._id===n.by._id))},o.a.createElement("div",{className:r.card},o.a.createElement("div",{className:r.cardMessage},o.a.createElement("p",{className:r.name},n.by.name),o.a.createElement("div",{className:r.contentTime},o.a.createElement("p",{className:r.date},new Date(n.createdAt).toLocaleString()),e.user._id===n.by._id&&o.a.createElement(jt.a,{onClick:function(){return o=n,void(e.loading||e.removeMessage(t._id,o._id,function(){return e.getSuggestionById(a.id)},function(){return s.a.error("Houve um erro ao remover mensagem",{autoClose:3e3})}));var o}},o.a.createElement(la.a,null)))),o.a.createElement("div",null,o.a.createElement("p",null,n.message))))}):null)),o.a.createElement(Ue.a,{container:!0,className:r.footer},o.a.createElement("div",{className:r.contentField},o.a.createElement("div",{className:r.contentInputMessage},o.a.createElement(ka.a,{className:r.input,placeholder:"Responda aqui",multiline:!0,maxLength:"2",disableUnderline:!0,onChange:function(e){return u(e.target.value)},value:l})),o.a.createElement("div",{className:r.contentButton},o.a.createElement(Je.a,{disabled:!l,onClick:function(){return f.apply(this,arguments)}},"Enviar",o.a.createElement(Ma.a,{className:r.icon}))))))})),Ra=Object(He.a)(function(e){return{root:{width:"100%",padding:32},tableWrapper:{overflowX:"auto",marginTop:32,width:"100%"},rightIcon:{marginLeft:e.spacing(1)},input:{minWidth:"50%"},tableCellFooter:{paddingRight:"32px !important"}}}),Ga=Object(_e.b)(function(e){return Object(d.a)({},e.suggestion,{isLoading:e.component.loading})},{requestSuggestions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:console.log;return function(o){o(se(K.UPDATE_COMPONENT_LOADING,!0));var r="suggestion?limit=".concat(t,"&page=").concat(e);a&&(r=r.concat("&field=".concat(a))),O.get(r).then(function(e){o(se(K.UPDATE_COMPONENT_LOADING,!1)),o(se(ie,e.data))}).catch(function(e){o(se(K.UPDATE_COMPONENT_LOADING,!1)),n(e)})}}})(function(e){var t=Ra(),a=new sa.a;a.pipe(Object(ua.a)(300)).subscribe(function(t){u(t),e.requestSuggestions(1,10,t)});var r=Object(n.useState)(""),c=Object(ke.a)(r,2),i=c[0],u=c[1];function m(){return o.a.createElement(Zt.a,{labelDisplayedRows:function(e){var t=e.from,a=e.to,n=e.count;return"".concat(t,"-").concat(a," de ").concat(n)},rowsPerPage:10,rowsPerPageOptions:[],count:e.total,page:e.page-1,onChangePage:function(t,a){!function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.page;e.isLoading||e.requestSuggestions(t,e.limit,i,function(){s.a.error("Falha na comunica\xe7\xe3o com o servidor")})}(a+1)}})}return Object(n.useEffect)(function(){return e.location.pathname===At.SUGGESTION&&e.requestSuggestions(e.page,e.limit,i,function(){s.a.error("Falha na comunica\xe7\xe3o com o servidor")}),function(){return a.complete()}},[e.location.pathname]),o.a.createElement(Ue.a,{container:!0},o.a.createElement(l.d,null,o.a.createElement(l.b,{exact:!0,path:At.SUGGESTION,render:function(){return o.a.createElement(Ue.a,{className:t.root},o.a.createElement(Ye.a,{onChange:function(e){return a.next(e.target.value)},className:t.input,variant:"outlined",label:"Procurar",placeholder:"Digite aqui para buscar, para data: yyyy-mm-dd",InputProps:{startAdornment:o.a.createElement(Qt.a,{position:"start"},o.a.createElement(jt.a,{onClick:function(){return e.requestSuggestions(1,10,i)}},o.a.createElement(ra.a,null)))}}),o.a.createElement(ea.a,{className:t.tableWrapper},o.a.createElement(ta.a,null,o.a.createElement(aa.a,null,o.a.createElement($t.a,null,o.a.createElement(Kt.a,{align:"center",component:"th"},"Usu\xe1rio"),o.a.createElement(Kt.a,{align:"center",component:"th"},"T\xedtulo"),o.a.createElement(Kt.a,{align:"center",component:"th"},"Criado em"),o.a.createElement(Kt.a,{align:"center",component:"th"},"Quantidade de mensagens"))),o.a.createElement(na.a,null,e.docs.map(function(t){return o.a.createElement($t.a,{onClick:function(){return e.history.push("/home/suggestion/"+t._id)},hover:!0,key:t._id},o.a.createElement(Kt.a,{align:"center"},t.name),o.a.createElement(Kt.a,{align:"center"},t.title),o.a.createElement(Kt.a,{align:"center"},new Date(t.createdAt).toLocaleString()),o.a.createElement(Kt.a,{align:"center"},t.messages.length))})),o.a.createElement(oa.a,null,o.a.createElement($t.a,null,m())))))}}),o.a.createElement(l.b,{exact:!0,path:At.SUGGESTION.concat("/:id"),render:function(){return o.a.createElement(Fa,null)}}),o.a.createElement(l.a,{from:"*",to:At.HOME})))}),qa=a(1413),Ba=a(1414),Wa=a(671),Ha=a.n(Wa),Va=a(27),za=Object(He.a)(function(e){return{content:{width:"100%","& h2":{color:"rgba(0,0,0,.38)"}},padding:{padding:16},margin:{margin:16},input:{width:"30%"},colorPositive:{color:"".concat(Va.a.green.A700," !important")},colorNegative:{color:"".concat(Va.a.red.A700," !important")},textResult:{marginLeft:16},root:{width:"100%",padding:32},tableWrapper:{overflowX:"auto",marginTop:32,width:"100%"},rightIcon:{marginLeft:e.spacing(1)},inputSearch:{minWidth:"50%"},tableCellFooter:{paddingRight:"32px !important"},fab:{position:"absolute !important",bottom:e.spacing(2),right:e.spacing(2),backgroundColor:"#3f51b5 !important",color:"#FFF !important",borderRadius:"50% !important"}}}),Ya=Object(ha.a)(Object(_e.b)(function(e){return Object(d.a)({},e.device.data,{isLoading:e.component.loading})},{requestDevices:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:console.log;return function(r){r(Q(!0));var c="device?limit=".concat(t,"&page=").concat(e);a&&(c=c.concat("&field=".concat(a))),O.get(c).then(function(e){var t;r(Q(!1)),r((t=e.data,{type:Ne,payload:{value:t}})),n&&n()}).catch(function(e){r(Q(!1)),o(e)})}},removeDevice:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:console.log,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;return function(n){n(Q(!0)),O.delete("device/".concat(e)).then(function(e){n(Q(!1)),t(e)}).catch(function(e){n(Q(!1)),a(e)})}}}),l.g)(function(e){var t=za(),a=new sa.a;a.pipe(Object(ua.a)(300)).subscribe(function(t){l(t),e.requestDevices(1,10,t)});var r=Object(n.useState)(""),c=Object(ke.a)(r,2),i=c[0],l=c[1];return Object(n.useEffect)(function(){return e.location.pathname===At.DEVICES&&e.requestDevices(e.page,e.limit,i,null,function(){s.a.error("Falha na comunica\xe7\xe3o com o servidor")}),function(){return a.complete()}},[e.location.pathname]),o.a.createElement(Ue.a,{container:!0},o.a.createElement(Ue.a,{className:t.root},o.a.createElement(Ye.a,{onChange:function(e){return a.next(e.target.value)},className:t.inputSearch,variant:"outlined",label:"Procurar",placeholder:"Digite aqui para filtrar na tabela",InputProps:{startAdornment:o.a.createElement(Qt.a,{position:"start"},o.a.createElement(jt.a,{onClick:function(){return e.requestDevices(1,10,i)}},o.a.createElement(ra.a,null)))}}),o.a.createElement(ea.a,{className:t.tableWrapper},o.a.createElement(Ha.a,{options:{search:!1,actionsColumnIndex:-1},localization:{header:{actions:"A\xe7\xf5es"},body:{emptyDataSourceMessage:"Nenhum dispositivo para mostrar",filterRow:{filterTooltip:"Filtrar"},editRow:{deleteText:"Deseja remover esse dispositivo?"}},toolbar:{searchTooltip:"Procurar",searchPlaceholder:"Digite aqui para buscar dispositivo"}},components:{Pagination:function(){return o.a.createElement(Zt.a,{labelDisplayedRows:function(e){var t=e.from,a=e.to,n=e.count;return"".concat(t,"-").concat(a," de ").concat(n)},rowsPerPage:10,rowsPerPageOptions:[],count:e.total,page:e.page-1,onChangePage:function(t,a){!function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.page;e.isLoading||e.requestDevices(t,e.limit,i,null,function(){s.a.error("Falha na comunica\xe7\xe3o com o servidor")})}(a+1)}})}},columns:[{title:"Nome",field:"name"},{title:"Identificador",field:"uuid",editable:"never"},{title:"Linha",field:"lineNumber",type:"numeric",min:0},{title:"Descri\xe7\xe3o da linha",field:"lineDescription",editable:"never"}],title:"Dispositivos",onRowClick:console.log,data:e.docs,editable:{onRowUpdate:function(t){return new Promise(function(a){!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:console.log,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;O.put("device",e).then(function(e){t(e)}).catch(function(e){a(e)})}(t,function(){e.requestDevices(e.page,e.limit,i,a,function(){s.a.error("Falha na comunica\xe7\xe3o com o servidor")}),s.a.success("Dispositivo editado com sucesso")},function(e){var t=e.response;a(),t&&404===t.status?s.a.error("A linha para associa\xe7\xe3o n\xe3o foi encontrada"):s.a.error("Falha ao editar dispositivo")})})},onRowDelete:function(t){return new Promise(function(a){e.removeDevice(t._id,function(){s.a.success("Dispositivo removido com sucesso"),e.requestDevices(e.page,e.limit,i,a,function(){s.a.error("Falha na comunica\xe7\xe3o com o servidor")})},function(){return s.a.error("Falha ao remover dispositivo")})})}}}))),o.a.createElement(qa.a,{onClick:function(){return e.history.push(At.ADD_DEVICES)},className:t.fab,color:"primary"},o.a.createElement(Ba.a,null)))}),Ja=a(1433),Xa=a(1416),Za=a(1428),$a=a(1432),Ka="Conectado",Qa="Desconectado",en="Conectando...",tn=function(e){var t,a=Object(n.useState)("Status"),r=Object(ke.a)(a,2),c=r[0],i=r[1],l=Object(n.useState)({text:"",topic:"",latitude:"",longitude:"",time:""}),u=Object(ke.a)(l,2),m=u[0],p=u[1],f=za(),E=Object(_e.c)(),g=Object(_e.d)(function(e){return e.component.loading});function v(e,t){if(e===m.topic&&t){Sa.unsubscribe(m.topic),E(Q(!1)),i(Ka),Ia.unsubscribe();var a=JSON.parse(t.toString());a&&p(Object(d.a)({},m,{latitude:a.lat,longitude:a.lon,time:a.time}))}}return Object(n.useEffect)(function(){return function(){Sa.removeListener("message",v),Sa.unsubscribe(m.topic),E(Q(!1)),Ia&&Ia.unsubscribe()}},[]),o.a.createElement(Ue.a,{container:!0,alignItems:"center",justify:"center",direction:"column",className:Object(Bt.a)(f.padding,f.content)},o.a.createElement("h2",{className:Object(Bt.a)((t={},Object(ze.a)(t,f.colorPositive,c===Ka),Object(ze.a)(t,f.colorNegative,c===Qa),t))},c),o.a.createElement(Ye.a,{disabled:g,value:m.text,onChange:function(e){return p(Object(d.a)({},m,{text:e.target.value,topic:e.target.value+"/pong"}))},className:f.input,variant:"outlined",placeholder:"Informe identificador do dispositivo",label:"Dispositivo"}),o.a.createElement(Ue.a,null,o.a.createElement(qa.a,{className:f.margin,color:"primary",variant:"extended",onClick:function(){g||(m?(Sa.subscribe(m.topic),Sa.publish(m.text.concat("/ping"),"ping"),Sa.addListener("message",v),Ia=Object($a.a)(1e4).subscribe(function(){Sa.unsubscribe(m.topic),E(Q(!1)),i(Qa)}),E(Q(!0)),i(en)):s.a.info("Informe o identificador do dispositivo"))}},"Conectar"),o.a.createElement(qa.a,{disabled:c!==Ka,className:f.margin,variant:"extended",onClick:function(){return e.finishProccess(m)}},"Pr\xf3ximo passo")))},an=a(689),nn=a(1436),on=a(1427),rn=a(1415),cn=function(e){var t=e.onClose,a=e.value,n=e.open,r=e.options,c=e.title,i=e.textCancel,l=e.textConfirm,s=Object(an.a)(e,["onClose","value","open","options","title","textCancel","textConfirm"]),u=o.a.useState(a),m=Object(ke.a)(u,2),d=m[0],p=m[1],f=o.a.useRef(null);return o.a.useEffect(function(){n||p(a)},[a,n]),o.a.createElement(nt.a,Object.assign({disableBackdropClick:!0,disableEscapeKeyDown:!0,maxWidth:"xs",onEntering:function(){null!==f.current&&f.current.focus()},"aria-labelledby":"confirmation-dialog-title",open:n},s),o.a.createElement(ot.a,{id:"confirmation-dialog-title"},c),o.a.createElement(rt.a,{dividers:!0},o.a.createElement(nn.a,{ref:f,"aria-label":"ringtone",name:"ringtone",value:d||"",onChange:function(e,t){p(t)}},r.map(function(e,t){return o.a.createElement(rn.a,{value:e._id,key:t.toString(),control:o.a.createElement(on.a,null),label:"".concat(e.number||""," - ").concat(e.description)})}))),o.a.createElement(it.a,null,o.a.createElement(Je.a,{onClick:function(){t()},color:"primary"},i),o.a.createElement(Je.a,{onClick:function(){t(d)},color:"primary"},l)))},ln=Object(ha.a)(Object(_e.b)(function(e){return Object(d.a)({},e.device,{loading:e.component.loading})},{updateName:function(e){return{type:ve,payload:{value:e}}},openDialog:function(e){return{type:he,payload:{value:e}}},onClose:function(e){return{type:be,payload:{value:e}}},requestLines:we,clear:function(){return{type:Oe}},createDevice:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:console.log,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;return function(n){n(Q(!0)),O.post("device",e).then(function(e){n(Q(!1)),t(e)}).catch(function(e){n(Q(!1)),a(e)})}}}),l.g)(function(e){var t=za();return Object(n.useEffect)(function(){return e.requestLines(function(){return s.a.error("Falha na comunica\xe7\xe3o com o servidor")}),e.clear},[]),o.a.createElement(Ue.a,{container:!0,alignItems:"center",justify:"center",direction:"column",className:Object(Bt.a)(t.padding,t.content)},o.a.createElement("h2",null,"Associar dispositivo com uma linha:"),o.a.createElement(Ye.a,{value:e.name,onChange:function(t){return e.updateName(t.target.value)},className:t.input,variant:"outlined",placeholder:"Informe um nome para o dispositivo",label:"Nome"}),o.a.createElement(Ue.a,{container:!0,wrap:"nowrap",justify:"center"},o.a.createElement("p",null,"Linha escolhida: "),o.a.createElement("p",{className:t.textResult},function(){if(e.value){var t=e.lines.find(function(t){return t._id===e.value});return o.a.createElement(o.a.Fragment,null,t.number," - ",t.description)}}())),o.a.createElement(Je.a,{variant:"outlined",disabled:e.loading,onClick:function(){return e.lines.length?e.openDialog(!0):s.a.info("Nenhuma linha para associar")}},"Abrir op\xe7\xf5es"),o.a.createElement(Ue.a,null,o.a.createElement(qa.a,{disabled:e.loading,className:t.margin,color:"primary",variant:"extended",onClick:function(){var t={uuid:e.device.text,name:e.name,line:e.value,latitude:e.device.latitude,longitude:e.device.longitude};t.uuid?t.line?e.createDevice(t,function(){s.a.success("Dispositivo cadastrado com sucesso"),e.history.goBack()},function(e){var t=e.response;t&&409===t.status?s.a.error("Dispositivo j\xe1 cadastrado"):s.a.error("Falha ao cadastrar dispositivo")}):s.a.info("Falta escolher a linha para associa\xe7\xe3o"):s.a.error("Identificador do dispositivo est\xe1 vazio")}},"Salvar")),o.a.createElement(cn,{open:e.open,options:e.lines,title:"Aten\xe7\xe3o",textCancel:"Cancelar",textConfirm:"Ok",value:e.value,onClose:e.onClose}))});var sn=["Conectar no dispositivo","Associar com uma linha"];function un(){var e=Object(n.useState)({step:0,device:null}),t=Object(ke.a)(e,2),a=t[0],r=t[1],c=za();return o.a.createElement(Ue.a,{wrap:"nowrap",container:!0},o.a.createElement(Ue.a,{container:!0,direction:"column",wrap:"nowrap",className:c.content},o.a.createElement(Ja.a,{activeStep:a.step},sn.map(function(e){return o.a.createElement(Xa.a,{key:e},o.a.createElement(Za.a,null,e))})),0===a.step&&o.a.createElement(tn,{finishProccess:function(e){return r(Object(d.a)({},a,{step:1,device:e}))}}),1===a.step&&o.a.createElement(ln,{device:a.device})))}var mn,dn=function(){return o.a.createElement(l.d,null,o.a.createElement(l.b,{path:At.DEVICES,exact:!0,component:Ya}),o.a.createElement(l.b,{path:At.ADD_DEVICES,exact:!0,component:un}),o.a.createElement(l.a,{from:"*",to:At.DEVICES}))},pn=Object(He.a)(function(e){return{input:{minWidth:"30vw",marginLeft:16},inputLine:{marginLeft:16},contentBlockMap:{maxHeight:"80vh",padding:"16px 0px"},contentFields:{flex:.5,display:"block",padding:8,overflowY:"auto"},contentMap:{flex:1},addIconField:{padding:"12px 0px"},iconRemove:{"&:hover $iconHiddenRemove":{visibility:"visible !important"}},iconHiddenRemove:{visibility:"hidden"},contentContainerMap:{height:"calc(80vh - 16px)"},buttonSave:{marginLeft:16,"& svg":{marginRight:10}},root:{width:"100%",padding:32},tableWrapper:{overflowX:"auto",marginTop:32,width:"100%"},rightIcon:{marginLeft:e.spacing(1)},inputSearch:{minWidth:"50%"},tableCellFooter:{paddingRight:"32px !important"},fab:{position:"absolute",bottom:e.spacing(2),right:e.spacing(2),zIndex:1}}}),fn=Object(ha.a)(Object(_e.b)(function(e){return Object(d.a)({},e.line.data,{isLoading:e.component.loading})},{requestLines:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:console.log;return function(o){o(pe(K.UPDATE_COMPONENT_LOADING,!0));var r="line?limit=".concat(t,"&page=").concat(e);a&&(r=r.concat("&field=".concat(a))),O.get(r).then(function(e){o(pe(K.UPDATE_COMPONENT_LOADING,!1)),o(pe(me,e.data))}).catch(function(e){o(pe(K.UPDATE_COMPONENT_LOADING,!1)),n(e)})}},removeLine:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:console.log,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;return function(n){n(pe(K.UPDATE_COMPONENT_LOADING,!0)),O.delete("line/".concat(e)).then(function(e){n(pe(K.UPDATE_COMPONENT_LOADING,!1)),t(e)}).catch(function(e){n(pe(K.UPDATE_COMPONENT_LOADING,!1)),a(e)})}}}),l.g)(function(e){var t=pn(),a=new sa.a;a.pipe(Object(ua.a)(300)).subscribe(function(t){l(t),e.requestLines(1,10,t)});var r=Object(n.useState)(""),c=Object(ke.a)(r,2),i=c[0],l=c[1];function u(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.page;e.isLoading||e.requestLines(t,e.limit,i,function(){s.a.error("Falha na comunica\xe7\xe3o com o servidor")})}return Object(n.useEffect)(function(){return e.location.pathname===At.LINES&&e.requestLines(e.page,e.limit,i,function(){s.a.error("Falha na comunica\xe7\xe3o com o servidor")}),function(){return a.complete()}},[e.location.pathname]),o.a.createElement(Ue.a,{container:!0},o.a.createElement(Ue.a,{className:t.root},o.a.createElement(Ye.a,{onChange:function(e){return a.next(e.target.value)},className:t.inputSearch,variant:"outlined",label:"Procurar",placeholder:"Digite aqui para buscar por n\xfamero ou descri\xe7\xe3o",InputProps:{startAdornment:o.a.createElement(Qt.a,{position:"start"},o.a.createElement(jt.a,{onClick:function(){return e.requestLines(1,10,i)}},o.a.createElement(ra.a,null)))}}),o.a.createElement(ea.a,{className:t.tableWrapper},o.a.createElement(ta.a,null,o.a.createElement(aa.a,null,o.a.createElement($t.a,null,o.a.createElement(Kt.a,{align:"center",component:"th"},"N\xfamero"),o.a.createElement(Kt.a,{align:"center",component:"th"},"Descri\xe7\xe3o"),o.a.createElement(Kt.a,{align:"center",component:"th"},"A\xe7\xe3o"))),o.a.createElement(na.a,null,e.docs.map(function(a){return o.a.createElement($t.a,{onClick:function(){return e.history.push(At.ADD_LINES.concat("/".concat(a._id)))},hover:!0,key:a._id},o.a.createElement(Kt.a,{align:"center"},a.number),o.a.createElement(Kt.a,{align:"center"},a.description),o.a.createElement(Kt.a,{align:"center"},o.a.createElement(Je.a,{onClick:function(t){t.stopPropagation(),e.removeLine(a._id,function(){s.a.success("Linha removida com sucesso"),u()},function(){return s.a.error("Falha ao remover linha")})},color:"secondary"},o.a.createElement(la.a,{className:t.rightIcon}),o.a.createElement("span",null,"Remover"))))})),o.a.createElement(oa.a,null,o.a.createElement($t.a,null,o.a.createElement(Zt.a,{labelDisplayedRows:function(e){var t=e.from,a=e.to,n=e.count;return"".concat(t,"-").concat(a," de ").concat(n)},rowsPerPage:10,rowsPerPageOptions:[],count:e.total,page:e.page-1,onChangePage:function(e,t){u(t+1)}})))))),o.a.createElement(qa.a,{onClick:function(){return e.history.push(At.ADD_LINES)},className:t.fab,color:"primary"},o.a.createElement(Ba.a,null)))}),En=a(1417),gn=a(1418),vn=a(1419),hn=function(e){return o.a.createElement(nt.a,{open:e.open,"aria-labelledby":"form-dialog-title"},o.a.createElement(ot.a,{id:"form-dialog-title"},e.title),o.a.createElement(rt.a,null,o.a.createElement(ct.a,null,e.message),o.a.createElement(Ye.a,{autoFocus:!0,onChange:e.onChange,margin:"dense",label:e.label,fullWidth:!0,value:e.text})),o.a.createElement(it.a,null,o.a.createElement(Je.a,{onClick:e.onCancel,color:"primary"},e.textCancel),o.a.createElement(Je.a,{onClick:e.onConfirm,color:"primary"},e.textButton)))},bn=a(682),On=a(1423),Nn=a(681),Cn=function(e){var t=Object(n.useState)(0),a=Object(ke.a)(t,2),r=a[0],c=a[1],i=Object(n.useState)(new Date),l=Object(ke.a)(i,2),s=l[0],u=l[1];return o.a.createElement(nt.a,{onClose:function(){return e.onOpen(!1)},fullWidth:!0,maxWidth:"sm",open:e.open,"aria-labelledby":"form-dialog-title"},o.a.createElement(ot.a,{id:"form-dialog-title"},"Aten\xe7\xe3o"),o.a.createElement(rt.a,null,o.a.createElement(Ge.a,{value:r,indicatorColor:"primary",textColor:"primary",onChange:function(e,t){return c(t)},centered:!0},o.a.createElement(qe.a,{label:"Segunda - S\xe1bado"}),o.a.createElement(qe.a,{label:"Domingo e feriados"})),o.a.createElement(bn.b,{utils:Nn.a},o.a.createElement(On.a,{okLabel:"Ok",cancelLabel:"Cancelar",margin:"normal",label:"Hor\xe1rio de sa\xedda",onChange:function(e){return u(e)},value:s}))),o.a.createElement(it.a,null,o.a.createElement(Je.a,{onClick:function(){return e.onOpen(!1)},color:"primary"},"Cancelar"),o.a.createElement(Je.a,{onClick:e.onConfirm,color:"primary"},"Salvar")))},yn=Object(_e.b)(function(e){return{loading:e.component.loading,line:e.line.lineEdited}},{createLine:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:console.log,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;return function(n){n(pe(K.UPDATE_COMPONENT_LOADING,!0)),O.post("line",e).then(function(e){n(pe(K.UPDATE_COMPONENT_LOADING,!1)),t(e)}).catch(function(e){n(pe(K.UPDATE_COMPONENT_LOADING,!1)),a(e)})}},getLineById:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:console.log;return function(a){a(pe(K.UPDATE_COMPONENT_LOADING,!0)),O.get("line/".concat(e)).then(function(e){a(pe(K.UPDATE_COMPONENT_LOADING,!1)),a(pe(de,e.data))}).catch(function(e){a(pe(K.UPDATE_COMPONENT_LOADING,!1)),t(e)})}},editLine:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:console.log,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;return function(n){n(pe(K.UPDATE_COMPONENT_LOADING,!0)),O.put("line",e).then(function(e){n(pe(K.UPDATE_COMPONENT_LOADING,!1)),t(e)}).catch(function(e){n(pe(K.UPDATE_COMPONENT_LOADING,!1)),a(e)})}}})(function(e){var t=tt(),a=pn(),r=Object(n.useRef)(null),c=e.match.params.id,i=Object(n.useState)(),l=Object(ke.a)(i,2),u=l[0],m=l[1],p=Object(n.useState)({line:"",description:"",errorLine:"",errorDescription:""}),f=Object(ke.a)(p,2),E=f[0],g=f[1],v=Object(n.useState)([{route:""},{route:""}]),h=Object(ke.a)(v,2),b=h[0],O=h[1],N=Object(n.useState)([]),C=Object(ke.a)(N,2),y=C[0],D=C[1],j=Object(n.useState)({index:null,text:"",open:!1}),w=Object(ke.a)(j,2),T=w[0],S=w[1],A=Object(n.useState)(!1),I=Object(ke.a)(A,2),P=I[0],x=I[1],_=Object(n.useState)(!1),k=Object(ke.a)(_,2),M=k[0],U=k[1];function F(e){var t=window.google;return"location"in e?e:"query"in e?e.query:new t.maps.LatLng(e.lat,e.lng)}function R(){if(b.every(function(e){return!!e.route})){var e=window.google,t=new e.maps.DirectionsService,a={origin:b[0].route,destination:b[b.length-1].route,waypoints:b.filter(function(e,t){return 0!==t&&t!==b.length-1}).map(function(e){return{location:e.route,stopover:!0}}),optimizeWaypoints:!0,travelMode:e.maps.TravelMode.DRIVING,avoidTolls:!0};t.route(a,function(t,a){a===e.maps.DirectionsStatus.OK?m(Object(d.a)({},u,t)):a===e.maps.DirectionsStatus.NOT_FOUND?s.a.error("Rota n\xe3o encontrada, verifique os caminhos inseridos"):s.a.error("Falha ao requisitar rota")})}else s.a.error("Existe campo de rota sem preenchimento")}return Object(n.useEffect)(function(){window.initMap=function(){return x(!0)},c&&e.getLineById(c,function(){s.a.error("Falha ao buscar dados da linha, tente novamente"),e.history.goBack()})},[]),Object(n.useEffect)(function(){if(e.line&&Object.keys(e.line).length&&window.google){O(Object(L.a)(e.line.routes)),D(Object(L.a)(e.line.points));var t=window.google,a=new t.maps.DirectionsService,n=[];n.push(e.line.directions.request.origin),n.push.apply(n,Object(L.a)(e.line.directions.request.waypoints)),n.push(e.line.directions.request.destination);var o=n[0],r=n[n.length-1],c={origin:F(o),destination:F(r),waypoints:n.filter(function(e,t){return 0!==t&&t!==n.length-1}).map(F),optimizeWaypoints:!0,travelMode:t.maps.TravelMode.DRIVING,avoidTolls:!0};a.route(c,function(e,a){a===t.maps.DirectionsStatus.OK?m(Object(d.a)({},u,e)):a===t.maps.DirectionsStatus.NOT_FOUND?s.a.error("Rota n\xe3o encontrada, verifique os caminhos inseridos"):s.a.error("Falha ao requisitar rota")}),g({line:e.line.number,description:e.line.description})}},[e.line,P]),o.a.createElement(Ue.a,{container:!0,className:t.container,wrap:"nowrap",direction:"column"},o.a.createElement(Ue.a,{alignItems:"center",container:!0},o.a.createElement("h2",null,"Informa\xe7\xe3o: "),o.a.createElement(Ye.a,{className:a.inputLine,value:E.line,onChange:function(e){return g(Object(d.a)({},E,{line:e.target.value,errorLine:""}))},variant:"outlined",type:"number",label:"Linha",InputProps:{inputProps:{min:0}},placeholder:"N\xfamero da linha",error:!!E.errorLine,helperText:E.errorLine}),o.a.createElement(Ye.a,{value:E.description,onChange:function(e){return g(Object(d.a)({},E,{description:e.target.value,errorDescription:""}))},className:a.input,variant:"outlined",label:"Descri\xe7\xe3o",placeholder:"Informe a descri\xe7\xe3o",error:!!E.errorDescription,helperText:E.errorDescription}),o.a.createElement(Je.a,{variant:"contained",onClick:function(){return U(!0)},className:a.buttonSave,color:"primary"},o.a.createElement("span",null,"Hor\xe1rios"))),o.a.createElement(Ue.a,{className:a.contentBlockMap,container:!0},o.a.createElement(ea.a,{className:t.maxWidth},o.a.createElement(Ue.a,{container:!0,wrap:"nowrap",className:a.contentContainerMap},o.a.createElement(Ue.a,{className:a.contentFields,container:!0},b.map(function(e,n){return o.a.createElement(Ue.a,{alignItems:"center",className:Object(Bt.a)(a.addIconField,Object(ze.a)({},a.iconRemove,b.length>2)),container:!0,key:n.toString(),wrap:"nowrap"},o.a.createElement(Ye.a,{className:t.maxWidth,value:e.route,onChange:function(e){var t=e.target.value;O(function(e){var a=Object(L.a)(e);return a[n].route=t,a})},placeholder:0===n?"Informe in\xedcio da rota":n===b.length-1?"Informe destino final":"Informe caminho",InputProps:{endAdornment:o.a.createElement(Qt.a,{position:"end"},o.a.createElement(jt.a,{onClick:R,edge:"end"},o.a.createElement(ra.a,null)))}}),o.a.createElement(jt.a,{onClick:function(){O(Object(L.a)(b.filter(function(e,t){return n!==t})))},className:a.iconHiddenRemove},o.a.createElement(En.a,null)))}),o.a.createElement(jt.a,{className:a.addIconField,onClick:function(){return O([].concat(Object(L.a)(b),[{route:""}]))}},o.a.createElement(gn.a,null))),o.a.createElement(Ue.a,{className:a.contentMap,container:!0},o.a.createElement(Oa,{onClick:function(e){var t=e.latLng;y.some(function(e){return e.showOverlayView})||(D([].concat(Object(L.a)(y),[{lat:t.lat(),lng:t.lng(),showOverlayView:!1,name:""}])),S(Object(d.a)({},T,{index:y.length,open:!0})))}},u&&o.a.createElement(ba.DirectionsRenderer,{ref:r,options:{draggable:!0},directions:u}),function(){var e=function(e){return function(t){D(function(t){var a=Object(L.a)(t);return a[e].showOverlayView=!a[e].showOverlayView,a})}};return y.map(function(a,n){return o.a.createElement(o.a.Fragment,{key:n.toString()},o.a.createElement(ba.Marker,{onClick:e(n),title:a.name,clickable:!0,draggable:!0,position:{lat:a.lat,lng:a.lng}}),a.showOverlayView&&o.a.createElement(ba.OverlayView,{mapPaneName:ba.OverlayView.OVERLAY_MOUSE_TARGET,position:{lat:a.lat,lng:a.lng}},o.a.createElement(ea.a,{className:t.container},o.a.createElement(Ue.a,{container:!0,direction:"column"},o.a.createElement("h4",null,"Nome do ponto: ",a.name),o.a.createElement(Je.a,{onClick:e(n)},"Fechar"),o.a.createElement(Je.a,{onClick:function(){S(Object(d.a)({},T,{index:n,text:a.name,open:!0})),e(n)()}},"Editar"),o.a.createElement(Je.a,{onClick:function(){return D(Object(L.a)(y.filter(function(e,t){return n!==t})))}},"Remover")))))})}()))))),o.a.createElement(hn,{open:T.open,title:"Aten\xe7\xe3o",message:"Informe o nome do marcador",label:"Nome",onChange:function(e){return S(Object(d.a)({},T,{text:e.target.value}))},onConfirm:function(){T.text?(null!==T.index&&D(function(e){var t=Object(L.a)(e);return t[T.index].name=T.text,t}),S(Object(d.a)({},T,{text:"",open:!1,index:null}))):s.a.info("Informe o nome do marcador")},textButton:"Salvar",text:T.text,textCancel:"Cancelar",onCancel:function(){return S(Object(d.a)({},T,{text:"",index:null,open:!1}))}}),o.a.createElement(qa.a,{variant:"extended",onClick:function(){var t=!0,a=Object(d.a)({},E);if(!e.loading){if(a.line||(a.errorLine="Campo vazio",t=!1),a.description||(a.errorDescription="Campo vazio",t=!1),!t)return void g(a);!function(){if(r.current){var t=r.current.getDirections(),a={number:E.line,description:E.description,routes:b,directions:{request:t.request,routes:t.routes[0].overview_path},points:y},n=function(e){return function(t){var a=t.response;a&&409===a.status?s.a.error("J\xe1 existe uma linha cadastrada com esse n\xfamero"):s.a.error(e)}};c?(a._id=e.line._id,e.editLine(a,function(){s.a.success("Linha editada com sucesso"),e.history.goBack()},n("Falha ao editar linha"))):e.createLine(a,function(){s.a.success("Linha cadastrada com sucesso"),e.history.goBack()},n("Falha ao criar linha"))}else s.a.info("Busque pela rota adicionada para renderizar no mapa")}()}},className:Object(Bt.a)(a.buttonSave,a.fab),color:"primary"},o.a.createElement(vn.a,null),o.a.createElement("span",null,"SALVAR")),o.a.createElement(Cn,{onOpen:U,open:M}))}),Dn=function(){return o.a.createElement(l.d,null,o.a.createElement(l.b,{path:At.LINES,exact:!0,component:fn}),o.a.createElement(l.b,{path:At.ADD_LINES,exact:!0,component:yn}),o.a.createElement(l.b,{path:At.ADD_LINES.concat("/:id"),exact:!0,component:yn}),o.a.createElement(l.a,{from:"*",to:At.LINES}))},jn=Object(He.a)(function(e){return{input:{minWidth:"30vw",marginLeft:16},inputLine:{marginLeft:16},contentBlockMap:{maxHeight:"80vh",padding:"16px 0px"},contentFields:{flex:.5,display:"block",padding:8,overflowY:"auto"},contentMap:{flex:1},addIconField:{padding:"12px 0px"},iconRemove:{"&:hover $iconHiddenRemove":{visibility:"visible !important"}},iconHiddenRemove:{visibility:"hidden"},contentContainerMap:{height:"calc(80vh - 16px)"},buttonSave:{marginLeft:16,"& svg":{marginRight:10}},inputRegisterNews:{width:"50vw",marginTop:16},textMessage:{margin:"16px 0px"},root:{width:"100%",padding:32},tableWrapper:{overflowX:"auto",marginTop:32,width:"100%"},rightIcon:{marginLeft:e.spacing(1)},inputSearch:{minWidth:"50%"},tableCellFooter:{paddingRight:"32px !important"},fab:{position:"absolute",bottom:e.spacing(2),right:e.spacing(2)}}}),wn=a(683),Ln=a.n(wn),Tn=Object(ha.a)(Object(_e.b)(function(e){return Object(d.a)({},e.news.data,{isLoading:e.component.loading})},{requestNews:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:console.log;return function(o){o(Ae(K.UPDATE_COMPONENT_LOADING,!0));var r="news?limit=".concat(t,"&page=").concat(e);a&&(r=r.concat("&field=".concat(a))),O.get(r).then(function(e){o(Ae(K.UPDATE_COMPONENT_LOADING,!1)),o(Ae(Te,e.data))}).catch(function(e){o(Ae(K.UPDATE_COMPONENT_LOADING,!1)),n(e)})}},removeNews:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:console.log,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;return function(n){n(Ae(K.UPDATE_COMPONENT_LOADING,!0)),O.delete("news/".concat(e)).then(function(e){n(Ae(K.UPDATE_COMPONENT_LOADING,!1)),t(e)}).catch(function(e){n(Ae(K.UPDATE_COMPONENT_LOADING,!1)),a(e)})}}}),l.g)(function(e){var t=jn(),a=new sa.a;a.pipe(Object(ua.a)(300)).subscribe(function(t){l(t),e.requestNews(1,10,t)});var r=Object(n.useState)(""),c=Object(ke.a)(r,2),i=c[0],l=c[1];function u(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.page;e.isLoading||e.requestNews(t,e.limit,i,function(){s.a.error("Falha na comunica\xe7\xe3o com o servidor")})}return Object(n.useEffect)(function(){return e.location.pathname===At.NEWS&&e.requestNews(e.page,e.limit,i,function(){s.a.error("Falha na comunica\xe7\xe3o com o servidor")}),function(){return a.complete()}},[e.location.pathname]),o.a.createElement(Ue.a,{container:!0},o.a.createElement(Ue.a,{className:t.root},o.a.createElement(Ye.a,{onChange:function(e){return a.next(e.target.value)},className:t.inputSearch,variant:"outlined",label:"Procurar",placeholder:"Digite aqui para filtrar",InputProps:{startAdornment:o.a.createElement(Qt.a,{position:"start"},o.a.createElement(jt.a,{onClick:function(){return e.requestNews(1,10,i)}},o.a.createElement(ra.a,null)))}}),o.a.createElement(ea.a,{className:t.tableWrapper},o.a.createElement(ta.a,null,o.a.createElement(aa.a,null,o.a.createElement($t.a,null,o.a.createElement(Kt.a,{align:"center",component:"th"},"Autor"),o.a.createElement(Kt.a,{align:"center",component:"th"},"T\xedtulo"),o.a.createElement(Kt.a,{align:"center",component:"th"},"Mensagem"),o.a.createElement(Kt.a,{align:"center",component:"th"},"Criado em"),o.a.createElement(Kt.a,{align:"center",component:"th"},"A\xe7\xe3o"))),o.a.createElement(na.a,null,e.docs.map(function(a){return o.a.createElement($t.a,{onClick:function(){return e.history.push(At.ADD_NEWS.concat("/".concat(a._id)))},hover:!0,key:a._id},o.a.createElement(Kt.a,null,a.author?a.author.name:""),o.a.createElement(Kt.a,null,a.title),o.a.createElement(Kt.a,null,Ln()(a.message)),o.a.createElement(Kt.a,null,new Date(a.createdAt).toLocaleString()),o.a.createElement(Kt.a,null,o.a.createElement(Je.a,{onClick:function(t){t.stopPropagation(),e.removeNews(a._id,function(){s.a.success("Not\xedcia removida com sucesso"),u()},function(){return s.a.error("Falha ao remover not\xedcia")})},color:"secondary"},o.a.createElement(la.a,{className:t.rightIcon}),o.a.createElement("span",null,"Remover"))))})),o.a.createElement(oa.a,null,o.a.createElement($t.a,null,o.a.createElement(Zt.a,{labelDisplayedRows:function(e){var t=e.from,a=e.to,n=e.count;return"".concat(t,"-").concat(a," de ").concat(n)},rowsPerPage:10,rowsPerPageOptions:[],count:e.total,page:e.page-1,onChangePage:function(e,t){u(t+1)}})))))),o.a.createElement(qa.a,{onClick:function(){return e.history.push(At.ADD_NEWS)},className:t.fab,color:"primary"},o.a.createElement(Ba.a,null)))}),Sn=a(186),An=a(684),In=a(685),Pn=a.n(In),xn=a(686),_n=a.n(xn),kn=(a(1240),Object(_e.b)(function(e){return{newsEdit:e.news.newsEdit,user:e.home.user}},{createNews:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:console.log,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;return function(n){n(Ae(K.UPDATE_COMPONENT_LOADING,!0)),O.post("news",e).then(function(e){n(Ae(K.UPDATE_COMPONENT_LOADING,!1)),t(e)}).catch(function(e){n(Ae(K.UPDATE_COMPONENT_LOADING,!1)),a(e)})}},editNews:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:console.log,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;return function(n){n(Ae(K.UPDATE_COMPONENT_LOADING,!0)),O.put("news",e).then(function(e){n(Ae(K.UPDATE_COMPONENT_LOADING,!1)),t(e)}).catch(function(e){n(Ae(K.UPDATE_COMPONENT_LOADING,!1)),a(e)})}},getNewsById:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:console.log;return function(a){a(Ae(K.UPDATE_COMPONENT_LOADING,!0)),O.get("news/".concat(e)).then(function(e){a(Ae(K.UPDATE_COMPONENT_LOADING,!1)),a(Ae(Se,e.data))}).catch(function(e){a(Ae(K.UPDATE_COMPONENT_LOADING,!1)),t(e)})}},clearNewsEdit:function(){return Ae(Se,null)}})(function(e){var t=tt(),a=jn(),r=Object(n.useState)(Sn.EditorState.createEmpty()),c=Object(ke.a)(r,2),i=c[0],l=c[1],u=Object(n.useState)(""),m=Object(ke.a)(u,2),d=m[0],p=m[1],f=e.match.params.id;return Object(n.useEffect)(function(){return f&&e.getNewsById(f,function(){return s.a.error("Falha na comunica\xe7\xe3o com o servidor, tente novamente")}),function(){return e.clearNewsEdit()}},[]),Object(n.useEffect)(function(){if(e.newsEdit){var t=e.newsEdit,a=t.message,n=t.title;p(n);var o=_n()(a),r=o.contentBlocks,c=o.entityMap,i=Sn.ContentState.createFromBlockArray(r,c);l(Sn.EditorState.createWithContent(i))}},[e.newsEdit]),o.a.createElement(Ue.a,{className:t.container,container:!0,direction:"column",wrap:"nowrap"},o.a.createElement(Re.a,{variant:"h4"},"Not\xedcia:"),o.a.createElement(Ye.a,{value:d,onChange:function(e){return p(e.target.value)},className:a.inputRegisterNews,placeholder:"Informe t\xedtulo",label:"T\xedtulo",inputProps:{maxLength:100}}),o.a.createElement(Re.a,{className:a.textMessage,variant:"h5"},"Mensagem:"),o.a.createElement(Ue.a,{style:{backgroundColor:"#FFF",minHeight:400}},o.a.createElement(An.Editor,{editorClassName:"editor",editorState:i,onEditorStateChange:function(e){return l(e)}})),o.a.createElement(qa.a,{onClick:function(){var t=Pn()(Object(Sn.convertToRaw)(i.getCurrentContent()));if(d&&t){var a={title:d,message:t,author:e.user._id},n=function(t){return function(){s.a.success(t),e.history.goBack()}},o=function(e){return function(){return s.a.error(e)}};f?(a._id=f,e.editNews(a,n("Not\xedcia editada com sucesso"),o("Falha ao editar not\xedcia"))):e.createNews(a,n("Not\xedcia registrada com sucesso"),o("Falha ao registrar not\xedcia"))}else s.a.info("Verifique os campos")},variant:"extended",color:"primary",className:a.fab},o.a.createElement("span",null,"Salvar")))})),Mn=function(){return o.a.createElement(l.d,null,o.a.createElement(l.b,{path:At.NEWS,exact:!0,component:Tn}),o.a.createElement(l.b,{path:At.ADD_NEWS,exact:!0,component:kn}),o.a.createElement(l.b,{path:At.ADD_NEWS.concat("/:id"),exact:!0,component:kn}),o.a.createElement(l.a,{from:"*",to:At.NEWS}))},Un=function(){var e=tt();return Object(_e.d)(function(e){return e.component.loading})?o.a.createElement(Fe.a,{color:"primary",className:e.linearProgress}):o.a.createElement("div",null)},Fn=a(1421),Rn=a(364),Gn=a.n(Rn),qn=a(1420),Bn=function(e){var t=e.title,a=e.content,n=e.icon,r=e.isLoading,c=e.error,i=e.buttonError,l=e.styleIcon,s=e.textColors,u=e.styleCard,m=dt();return o.a.createElement(Ue.a,{className:m.card,item:!0,xs:12,sm:4,md:4,lg:3,xl:3},o.a.createElement(ea.a,{style:u,className:m.paper},o.a.createElement(Ue.a,{container:!0,direction:"row",wrap:"nowrap",justify:"center",alignItems:"center"},o.a.createElement(Ue.a,{className:m.contentInformation,item:!0,container:!0,direction:"column"},o.a.createElement("p",{style:s&&{color:s}},t),r?o.a.createElement(Gn.a,{circle:!0,height:50,width:50}):c?o.a.createElement("div",null,o.a.createElement(jt.a,{onClick:i},o.a.createElement(qn.a,{style:s&&{color:s}}))):o.a.createElement(Re.a,{style:s&&{color:s},className:m.result,variant:"h4"},a)),o.a.createElement(Ue.a,{className:m.contentIcon,container:!0},o.a.createElement(Fn.a,{className:m.icon,style:l},n)))))},Wn=a(687),Hn=a(1422),Vn=Object(He.a)({root:{flexGrow:1},icon:{position:"absolute",left:16},contentTitle:{display:"flex",justifyContent:"center",marginBottom:16}}),zn=o.a.forwardRef(function(e,t){return o.a.createElement(at.a,Object.assign({direction:"up",ref:t},e))}),Yn=function(e){var t=Object(_e.c)(),a=Vn(),r=Object(n.useState)(4),c=Object(ke.a)(r,2),i=c[0],l=c[1],u=Object(n.useState)({docs:[],page:1,pages:1,limit:10,total:0}),m=Object(ke.a)(u,2),p=m[0],f=m[1];function E(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p.page,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i,o=arguments.length>2?arguments[2]:void 0;t(Q(!0)),mn&&mn("cancelled"),O.get("line/score/".concat(e.idLine,"?page=").concat(a,"&limit=").concat(p.limit,"&star=").concat(n+1),{cancelToken:new b(function(e){return mn=e})}).then(function(e){t(Q(!1)),f(Object(d.a)({},p,e.data))}).catch(function(e){e&&"cancelled"===e.message||(o&&o(),t(Q(!1)),s.a.error("Falha de comunica\xe7\xe3o com o servidor"))})}return Object(n.useEffect)(function(){e.idLine&&E(p.page,i)},[e.idLine]),o.a.createElement(nt.a,{open:e.open,fullScreen:!0,TransitionComponent:zn,style:{backgroundColor:"transparent"}},o.a.createElement("div",{className:a.contentTitle},o.a.createElement(jt.a,{className:a.icon,onClick:e.onClose},o.a.createElement(pt.a,null)),o.a.createElement(Re.a,{variant:"h4"},"Coment\xe1rios")),o.a.createElement(Ue.a,{container:!0,direction:"column",wrap:"nowrap"},o.a.createElement(ea.a,{className:a.root},o.a.createElement(Ge.a,{indicatorColor:"primary",textColor:"primary",centered:!0,value:i,onChange:function(e,t){var a=i;l(t),E(1,t,function(){return l(a)})},"aria-label":"simple tabs example"},o.a.createElement(qe.a,{label:"1 estrela"}),o.a.createElement(qe.a,{label:"2 estrelas"}),o.a.createElement(qe.a,{label:"3 estrelas"}),o.a.createElement(qe.a,{label:"4 estrelas"}),o.a.createElement(qe.a,{label:"5 estrelas"}))),o.a.createElement(ta.a,{size:"small"},o.a.createElement(aa.a,null,o.a.createElement($t.a,null,o.a.createElement(Kt.a,{component:"th"},"Usu\xe1rio"),o.a.createElement(Kt.a,{component:"th"},"Mensagem"),o.a.createElement(Kt.a,{component:"th"},"Linha"),o.a.createElement(Kt.a,{component:"th"},"Estrelas"),o.a.createElement(Kt.a,{component:"th"},"Criado em"))),o.a.createElement(na.a,null,p.docs.map(function(e,t){return o.a.createElement($t.a,{key:t.toString()},o.a.createElement(Kt.a,null,e.user.name),o.a.createElement(Kt.a,null,e.description),o.a.createElement(Kt.a,null,e.line.number," - ",e.line.description),o.a.createElement(Kt.a,null,o.a.createElement(Ue.a,{container:!0,wrap:"nowrap"},function(e){for(var t=[],a=0;a<e;a++)t[a]=o.a.createElement(Hn.a,{key:a.toString()});return t}(e.star))),o.a.createElement(Kt.a,null,new Date(e.createdAt).toLocaleString()))})),o.a.createElement(oa.a,null,o.a.createElement($t.a,null,o.a.createElement(Zt.a,{labelDisplayedRows:function(e){var t=e.from,a=e.to,n=e.count;return"".concat(t,"-").concat(a," de ").concat(n)},rowsPerPage:10,rowsPerPageOptions:[],count:p.total,page:p.page-1,onChangePage:function(e,t){E(t+1)}}))))))};var Jn=Object(_e.b)(function(e){return{lines:e.device.lines,errorToLoadLines:e.device.errorToLoadLines,score:e.home.score,isLoadingScore:e.home.isLoadingScore,errorToLoadScore:e.home.errorToLoadScore}},{requestLines:we,requestScore:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"all",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:console.log,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:console.log;return function(n){n(X(!1)),n(J(!0)),O.get("line/score?filter=".concat(e)).then(function(e){var a;n(J(!1)),n((a=e.data,{type:R,payload:{value:a}})),t()}).catch(function(e){a(e),n(J(!1)),n(X(!0))})}}})(function(e){var t={_id:"all",description:"Todas as linhas",number:null},a=tt(),r=Object(n.useState)(!1),c=Object(ke.a)(r,2),i=c[0],l=c[1],u=Object(n.useState)({open:!1,id:""}),m=Object(ke.a)(u,2),p=m[0],f=m[1],E=Object(n.useState)(t),g=Object(ke.a)(E,2),v=g[0],h=g[1];function b(a){e.requestScore(a||t._id,h(Object(d.a)({},v,e.lines.find(function(e){return e._id===a})||t)),function(){return s.a.error("Falha ao fazer filtragem")})}Object(n.useEffect)(function(){e.requestLines(),e.requestScore()},[]);var O=[t].concat(Object(L.a)(e.lines));return o.a.createElement(Ue.a,{item:!0,className:a.container},o.a.createElement(ea.a,null,o.a.createElement(Ue.a,{justify:"space-between",alignItems:"center",container:!0,wrap:"nowrap",className:a.container},o.a.createElement(Re.a,{variant:"h5"},"Pontua\xe7\xe3o das linhas"),o.a.createElement(Ue.a,null,"all"!==v._id&&e.score.some(function(e){return e})&&o.a.createElement(Je.a,{color:"primary",variant:"outlined",onClick:function(){return f({open:!0,id:v._id})}},"Ver coment\xe1rios"),o.a.createElement(Je.a,{onClick:function(){return l(!0)}},"Filtro: ",v.number," - ",v.description),o.a.createElement(jt.a,{onClick:function(){return b()}},o.a.createElement(qn.a,null)))),o.a.createElement(Ct.a,null),o.a.createElement(Ue.a,{container:!0,justify:"center",alignItems:"center",style:{minHeight:200}},e.errorToLoadScore?o.a.createElement(jt.a,{onClick:function(){return b()}},o.a.createElement(qn.a,null)):e.isLoadingScore?o.a.createElement(Gn.a,{height:200,width:400}):e.score.every(function(e){return!e})?o.a.createElement(Re.a,{variant:"h5"},"Sem registro de score"):o.a.createElement(Ue.a,{container:!0,item:!0,sm:5},o.a.createElement(Wn.a,{data:{datasets:[{data:e.score,backgroundColor:["#FF6384","#36A2EB","#FFCE56","#56ff5e","#6756ff"]}],labels:["1 estrela","2 estrelas","3 estrelas","4 estrelas","5 estrelas"]}})))),o.a.createElement(cn,{open:i,options:O,title:"Filtrar",textCancel:"Cancelar",textConfirm:"Ok",value:v._id,onClose:function(e){l(!1),e&&b(e)}}),o.a.createElement(Yn,{idLine:p.id,open:p.open,onClose:function(){return f({open:!1,id:""})}}))});var Xn=Object(_e.b)(function(e){return{isLoadingTotalUsers:e.home.isLoadingTotalUsers,totalUsers:e.home.totalUsers,errorLoadTotalUsers:e.home.errorLoadTotalUsers,totalDevices:e.home.totalDevices,isLoadingTotalDevices:e.home.isLoadingTotalDevices,errorLoadTotalDevices:e.home.errorLoadTotalDevices,totalLines:e.home.totalLines,isLoadingTotalLines:e.home.isLoadingTotalLines,errorLoadTotalLines:e.home.errorLoadTotalLines}},{requestTotalUsers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:console.log;return function(t){t(B(!0)),t(W(!1)),O.get("user/count").then(function(e){var a;t(B(!1)),t((a=e.data.count,{type:S,payload:{value:a}}))}).catch(function(a){e(a),t(B(!1)),t(W(!0))})}},requestTotalDevices:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:console.log;return function(t){t(V(!1)),t(H(!0)),O.get("device/count").then(function(e){var a;t(H(!1)),t((a=e.data.count,{type:I,payload:{value:a}}))}).catch(function(a){e(a),t(H(!1)),t(V(!0))})}},requestTotalLines:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:console.log;return function(t){t(Y(!1)),t(z(!0)),O.get("line/count").then(function(e){var a;t(z(!1)),t((a=e.data.count,{type:_,payload:{value:a}}))}).catch(function(a){e(a),t(z(!1)),t(Y(!0))})}}})(function(e){var t=dt(),a=tt();return Object(n.useEffect)(function(){e.requestTotalUsers(),e.requestTotalDevices(),e.requestTotalLines()},[]),o.a.createElement(Ea,null,o.a.createElement(Ue.a,{className:a.maxWidth},o.a.createElement(Ue.a,{className:t.contentCard,justify:"space-between",container:!0},o.a.createElement(Bn,{buttonError:function(){return e.requestTotalDevices()},error:e.errorLoadTotalDevices,isLoading:e.isLoadingTotalDevices,icon:"location_on",title:"Total de dispositivos",content:e.totalDevices}),o.a.createElement(Bn,{buttonError:function(){return e.requestTotalLines()},error:e.errorLoadTotalLines,isLoading:e.isLoadingTotalLines,styleIcon:{backgroundColor:"rgb(251, 140, 0)"},icon:"directions",title:"Total de linhas",content:e.totalLines}),o.a.createElement(Bn,{buttonError:function(){return e.requestTotalUsers()},error:e.errorLoadTotalUsers,isLoading:e.isLoadingTotalUsers,textColors:"#FFF",styleIcon:{backgroundColor:"#FFF",color:"#000"},styleCard:{backgroundColor:"#3f51b5",color:"#FFF"},icon:"people_outline",title:"Total de usu\xe1rios",content:e.totalUsers})),o.a.createElement(Jn,null)))}),Zn=Object(_e.b)(function(e){return{usersNotAuthorized:e.home.usersNotAuthorized,user:e.home.user}},{requestEmployeeToEnable:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:console.log;return function(t){O.get("employee/not_authorized").then(function(e){return t((a=e.data,{type:U,payload:{value:a}}));var a}).catch(e)}},requestUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:console.log;return function(t){O.get("employee/current").then(function(e){e.data||v.removeUser(),t(Z(e.data))}).catch(e)}},logout:function(){return{type:F,payload:{value:{email:"",name:"",role:""}}}}})(function(e){var t=e.requestEmployeeToEnable,a=e.usersNotAuthorized,r=e.requestUser,c=e.logout,i=tt(),u=dt(),m=Object(n.useState)(!1),d=Object(ke.a)(m,2),p=d[0],f=d[1],E=Object(n.useState)(!1),g=Object(ke.a)(E,2),h=g[0],b=g[1],O=Object(n.useState)(!1),N=Object(ke.a)(O,2),C=N[0],y=N[1],D=Object(n.useState)(null),j=Object(ke.a)(D,2),w=j[0],L=j[1],T=Object(n.useState)(!1),S=Object(ke.a)(T,2),A=S[0],I=S[1],P=function(){return f(!p)},x=function(){return b(!h)};return Object(n.useEffect)(function(){if(v.getUser()){var a=!0,n=function(){a&&e.location.pathname===At.HOME&&s.a.error("Erro de comunica\xe7\xe3o com servidor, verique sua conex\xe3o"),a=!1};t(n),r(n)}else y(!0)},[e.location]),C?o.a.createElement(l.a,{to:At.LOGIN}):o.a.createElement(Ea,{onlyToken:!0},o.a.createElement(Ue.a,{className:i.maxContainer,container:!0,item:!0,direction:"column",wrap:"nowrap",alignItems:"center"},o.a.createElement(Un,null),o.a.createElement(Vt,{onDrawer:I,handleClose:P,usersNotAuthorized:a,onSelectedUser:function(e){L(e),x()}}),o.a.createElement(st,{transition:"Slide",title:"Aten\xe7\xe3o",open:p,onClose:P,message:"Deseja sair da aplica\xe7ao?",negativeButton:"N\xe3o",positiveButton:"Sim",negativeAction:P,positiveAction:function(){c(),P(),v.removeUser(),y(!0)}}),o.a.createElement(Xt,{message:"Deseja aprovar a entrada desse usu\xe1rio no sistema?",messageCheckBox:"Aprovar usu\xe1rio como admin?",success:function(){b(!1),t(),s.a.success("Usu\xe1rio aprovado com sucesso")},error:function(){b(!1),s.a.error("Falha ao aprovar usu\xe1rio no sistema")},user:w,open:h,negativeAction:x}),o.a.createElement(Ue.a,{item:!0,container:!0,className:Object(Bt.a)(u.content,Object(ze.a)({},u.contentShift,A))},o.a.createElement(l.d,null,o.a.createElement(l.b,{exact:!0,path:At.HOME,component:Xn}),o.a.createElement(l.b,{exact:!0,path:At.MAP,component:Aa}),o.a.createElement(l.b,{path:At.EMPLOYEES,component:da}),o.a.createElement(l.b,{path:At.ACCOUNT,component:fa}),o.a.createElement(l.b,{path:At.HISTORY,component:va}),o.a.createElement(l.b,{path:At.SUGGESTION,component:Ga}),o.a.createElement(l.b,{path:At.DEVICES,component:dn}),o.a.createElement(l.b,{path:At.LINES,component:Dn}),o.a.createElement(l.b,{path:At.NEWS,component:Mn}),o.a.createElement(l.a,{from:"*",to:At.HOME})))))});var $n=function(){return s.a.configure({position:s.a.POSITION.BOTTOM_RIGHT}),o.a.createElement(_e.a,{store:xe},o.a.createElement(i.a,null,o.a.createElement(l.d,null,o.a.createElement(l.b,{path:"/login",component:et}),o.a.createElement(l.b,{path:"/home",component:Zn}),o.a.createElement(l.a,{from:"*",to:"/login"}),o.a.createElement(l.a,{from:"/",to:"/login"}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement($n,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},665:function(e,t,a){e.exports=a.p+"static/media/connected_world.73ac2c2d.svg"},668:function(e,t,a){e.exports=a.p+"static/media/bus.f1a35d33.png"},767:function(e,t,a){e.exports=a(1332)},772:function(e,t,a){},773:function(e,t,a){}},[[767,1,2]]]);
//# sourceMappingURL=main.fdf5d530.chunk.js.map